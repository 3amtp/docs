{"config":{"lang":["en","vi"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"PilotPractice Documentation","text":""},{"location":"#tai-lieu","title":"\ud83d\udcda T\u00e0i li\u1ec7u","text":""},{"location":"#dashboard-documentation","title":"\ud83c\udfaf Dashboard Documentation","text":""},{"location":"#widget-documentation","title":"\ud83e\udde9 Widget Documentation","text":""},{"location":"#api-documentation-coming-soon","title":"\ud83d\udd0c API Documentation - Coming Soon","text":""},{"location":"#intake-form-documentation-coming-soon","title":"\ud83d\udccb Intake Form Documentation - Coming Soon","text":""},{"location":"#workflow-documentation-coming-soon","title":"\u2699\ufe0f Workflow Documentation - Coming Soon","text":""},{"location":"api/API/","title":"API Documentation","text":""},{"location":"api/API/#coming-soon","title":"\ud83d\udea7 Coming Soon","text":"<p>T\u00e0i li\u1ec7u API \u0111ang \u0111\u01b0\u1ee3c x\u00e2y d\u1ef1ng v\u00e0 s\u1ebd s\u1edbm \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt.</p> <p>N\u1ed9i dung d\u1ef1 ki\u1ebfn:</p> <ul> <li>API Endpoints</li> <li>Authentication</li> <li>Request/Response Examples</li> <li>Error Handling</li> <li>Rate Limiting</li> </ul>"},{"location":"dashboard/","title":"\ud83d\udcda Routes Documentation","text":"<p>T\u00e0i li\u1ec7u chi ti\u1ebft v\u1ec1 t\u1ea5t c\u1ea3 routes v\u00e0 modules trong PilotPractice Dashboard.</p>"},{"location":"dashboard/#main-modules","title":"\ud83d\udcc1 Main Modules","text":""},{"location":"dashboard/#1-tickets","title":"1. \ud83c\udfab Tickets","text":"<p>Support ticket management system.</p>"},{"location":"dashboard/#2-communication","title":"2. \ud83d\udcde Communication","text":"<ul> <li>Calls - Voice calls via Twilio</li> <li>Voicemails - Voicemail management</li> <li>Messages - Multi-channel messaging</li> <li>Fax - Fax management</li> </ul>"},{"location":"dashboard/#3-calendar","title":"3. \ud83d\udcc5 Calendar","text":"<p>Event scheduling v\u00e0 calendar management.</p>"},{"location":"dashboard/#4-contacts-leads","title":"4. \ud83d\udc65 Contacts &amp; Leads","text":"<p>Customer relationship management.</p>"},{"location":"dashboard/#5-forms","title":"5. \ud83d\udcdd Forms","text":"<p>PDF-based templates v\u1edbi e-signature support.</p>"},{"location":"dashboard/#6-workflows","title":"6. \ud83d\udd04 Workflows","text":"<p>Simple automation rules.</p>"},{"location":"dashboard/#7-payment-billing","title":"7. \ud83d\udcb0 Payment &amp; Billing","text":"<p>Invoice v\u00e0 payment processing.</p>"},{"location":"dashboard/#8-tasks","title":"8. \u2705 Tasks","text":"<p>Task management system.</p>"},{"location":"dashboard/#9-reports","title":"9. \ud83d\udcca Reports","text":"<p>Analytics v\u00e0 reporting dashboard.</p>"},{"location":"dashboard/#10-settings","title":"10. \u2699\ufe0f Settings","text":"<p>System configuration (19 nested routes).</p>"},{"location":"dashboard/#11-client-portal","title":"11. \ud83c\udfe5 Client Portal","text":"<p>Patient self-service portal.</p>"},{"location":"dashboard/#12-other-modules","title":"12. \ud83d\udce7 Other Modules","text":"<p>Marketing, Dialer, Mentions, etc.</p>"},{"location":"dashboard/#key-features","title":"\ud83d\udd11 Key Features","text":""},{"location":"dashboard/#forms-system","title":"Forms System","text":"<ul> <li>PDF-based templates (NOT drag-drop builder)</li> <li>13 custom field types</li> <li>E-signature support</li> <li>Auto-fill from lead data</li> </ul>"},{"location":"dashboard/#client-portal","title":"Client Portal","text":"<ul> <li>Phone verification login</li> <li>6 main tabs (Home, Appointments, Forms, Billing, Personal Info, Files)</li> <li>Stripe payment integration</li> <li>Mobile-responsive</li> </ul>"},{"location":"dashboard/#workflows","title":"Workflows","text":"<ul> <li>Simple automation rules (NOT visual builder)</li> <li>Email/SMS automation</li> <li>Metrics tracking</li> </ul>"},{"location":"dashboard/calendar/","title":"Calendar Screen - Qu\u1ea3n l\u00fd s\u1ef1 ki\u1ec7n v\u00e0 l\u1ecbch l\u00e0m vi\u1ec7c","text":""},{"location":"dashboard/calendar/#1-gioi-thieu","title":"1. Gi\u1edbi thi\u1ec7u","text":"<p>M\u00e0n h\u00ecnh Calendar cho ph\u00e9p qu\u1ea3n l\u00fd events c\u1ee7a team, bao g\u1ed3m: - Hi\u1ec3n th\u1ecb events t\u1eeb widget booking - Sync events t\u1eeb third-party integrations (Google Calendar, Outlook...) - T\u1ea1o custom events - Qu\u1ea3n l\u00fd event types - Filter theo location (n\u1ebfu project b\u1eadt multi-location)</p> <p>Routes: - <code>/calendar</code> - Trang ch\u00ednh calendar</p> <p>Scope: Xem, t\u1ea1o, s\u1eeda, x\u00f3a events. H\u1ed7 tr\u1ee3 check-in/check-out cho appointments.</p>"},{"location":"dashboard/calendar/#2-yeu-cau-chuc-nang","title":"2. Y\u00eau c\u1ea7u ch\u1ee9c n\u0103ng","text":""},{"location":"dashboard/calendar/#21-hien-thi-events","title":"2.1 Hi\u1ec3n th\u1ecb Events","text":"<ul> <li>Show events c\u00f3 staff thu\u1ed9c team \u0111ang config (t\u1eeb Settings)</li> <li>Hi\u1ec3n th\u1ecb events t\u1eeb:</li> <li>Widget booking appointments</li> <li>Integration sync (Google Calendar, Outlook, Office365)</li> <li>Custom events t\u1ea1o th\u1ee7 c\u00f4ng</li> <li>Filter theo location (n\u1ebfu <code>project.dashboard_location_filter === true</code>)</li> <li>\u1ea8n no_show events (<code>get_no_show: false</code> trong API params)</li> </ul>"},{"location":"dashboard/calendar/#22-tao-event","title":"2.2 T\u1ea1o Event","text":"<ul> <li>Click v\u00e0o time slot \u2192 m\u1edf modal t\u1ea1o event</li> <li>Ch\u1ecdn event type (custom ho\u1eb7c t\u1eeb danh s\u00e1ch c\u00f3 s\u1eb5n)</li> <li>Assign participants (leads, staffs)</li> <li>Set start_time, end_time, timezone</li> <li>Attach procedures/services (n\u1ebfu c\u00f3)</li> <li>T\u1ea1o meeting room (telehealth) n\u1ebfu c\u1ea7n</li> </ul>"},{"location":"dashboard/calendar/#23-suaxoa-event","title":"2.3 S\u1eeda/X\u00f3a Event","text":"<ul> <li>Click v\u00e0o event \u2192 m\u1edf modal chi ti\u1ebft</li> <li>Ch\u1ec9nh s\u1eeda th\u00f4ng tin event</li> <li>Delete event (ch\u1ec9 custom events, kh\u00f4ng x\u00f3a \u0111\u01b0\u1ee3c sync events)</li> <li>Update status: <code>confirmed</code>, <code>pending</code>, <code>complete</code>, <code>cancelled</code>, <code>no_show</code>, <code>request</code></li> </ul>"},{"location":"dashboard/calendar/#24-check-incheck-out","title":"2.4 Check-in/Check-out","text":"<ul> <li>Check-in: \u0110\u00e1nh d\u1ea5u lead \u0111\u00e3 \u0111\u1ebfn (<code>checked_in: timestamp</code>)</li> <li>Check-out: \u0110\u00e1nh d\u1ea5u lead \u0111\u00e3 r\u1eddi \u0111i (<code>checked_out: timestamp</code>)</li> </ul>"},{"location":"dashboard/calendar/#25-sync-voi-third-party","title":"2.5 Sync v\u1edbi Third-party","text":"<ul> <li>Toggle sync cho t\u1eebng calendar integration</li> <li>Auto refresh khi c\u00f3 event m\u1edbi t\u1eeb integration</li> <li>Display flag <code>source: 'third_party'</code> \u0111\u1ec3 ph\u00e2n bi\u1ec7t</li> </ul>"},{"location":"dashboard/calendar/#3-api-endpoints","title":"3. API Endpoints","text":"Method Endpoint M\u1ee5c \u0111\u00edch Params Response GET <code>/api/events</code> L\u1ea5y danh s\u00e1ch events <code>start_time</code>, <code>end_time</code>, <code>location_id?</code>, <code>staff_id?</code> <code>EventList</code> GET <code>/api/events/:id</code> L\u1ea5y chi ti\u1ebft event <code>id</code> (string) <code>Event</code> POST <code>/api/events</code> T\u1ea1o event m\u1edbi <code>EventRequestParams</code> <code>Event</code> PUT <code>/api/events/:id</code> C\u1eadp nh\u1eadt event <code>id</code>, <code>EventRequestParams</code> <code>Event</code> DELETE <code>/api/events/:id</code> X\u00f3a event <code>id</code> (string) <code>Event</code> GET <code>/api/event-types</code> L\u1ea5y danh s\u00e1ch event types <code>location_id?</code> <code>EventType[]</code> POST <code>/api/event-types</code> T\u1ea1o event type m\u1edbi <code>EventType</code> <code>EventType[]</code> PUT <code>/api/event-types/:id</code> C\u1eadp nh\u1eadt event type <code>id</code>, <code>EventType</code> <code>EventType[]</code> DELETE <code>/api/event-types/:id</code> X\u00f3a event type <code>id</code> <code>EventType[]</code> POST <code>/api/events/telehealth</code> T\u1ea1o meeting room cho event <code>eventId</code> <code>EventRoomType</code> DELETE <code>/api/event-rooms/:id</code> X\u00f3a meeting room <code>id</code> <code>unknown</code> PUT <code>/api/calendars/:id</code> Toggle sync calendar <code>id</code>, <code>sync: boolean</code> <code>Calendar</code> PUT <code>/api/calendars/bulk</code> S\u1eafp x\u1ebfp th\u1ee9 t\u1ef1 calendars <code>calendar: [{id, order}]</code> <code>Calendar</code>"},{"location":"dashboard/calendar/#31-eventrequestparams","title":"3.1 EventRequestParams","text":"<pre><code>{\n  title?: string;\n  start_time?: number;          // Unix timestamp\n  end_time?: number;            // Unix timestamp\n  location_id?: number;\n  type?: string;                // Event type\n  status?: string;              // 'confirmed' | 'pending' | 'complete' | 'cancelled' | 'no_show' | 'request'\n  participants?: Participant[]; // [{participable_type, participable_id}]\n  description?: string;\n  procedure_ids?: string[];     // Services attached\n  procedure_addons?: string[];\n  procedure_addon_ids?: string[];\n  isStaffMeeting?: boolean;     // Internal staff meeting\n  timezone?: string;\n  checked_in?: number;          // Timestamp\n  checked_out?: number;         // Timestamp\n  event_room_id?: number;       // Telehealth room\n  notify_participants?: boolean;\n}\n</code></pre>"},{"location":"dashboard/calendar/#4-websocket-events","title":"4. WebSocket Events","text":"Event Type Trigger Action <code>NEW_EVENT</code> Event m\u1edbi \u0111\u01b0\u1ee3c t\u1ea1o Invalidate query <code>['fetchEvents']</code>, refresh calendar <code>EVENT_UPDATED</code> Event \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt Invalidate query <code>['fetchEvents']</code>, refresh calendar <code>EVENT_DELETED</code> Event b\u1ecb x\u00f3a Invalidate query <code>['fetchEvents']</code>, refresh calendar"},{"location":"dashboard/calendar/#5-redux-state","title":"5. Redux State","text":""},{"location":"dashboard/calendar/#51-calendar-state","title":"5.1 Calendar State","text":"<ul> <li><code>eventsCalendar.roomUrl</code> - Meeting room URL cho event</li> <li><code>eventsCalendar.events</code> - Danh s\u00e1ch events hi\u1ec7n t\u1ea1i</li> </ul>"},{"location":"dashboard/calendar/#52-actions","title":"5.2 Actions","text":"<ul> <li><code>clearRoomCalendar()</code> - Clear meeting room khi leave</li> </ul>"},{"location":"dashboard/calendar/#6-luu-y-ky-thuat","title":"6. L\u01b0u \u00fd k\u1ef9 thu\u1eadt","text":""},{"location":"dashboard/calendar/#61-filter-logic","title":"6.1 Filter Logic","text":"<ul> <li>Location Filter: Ch\u1ec9 hi\u1ec7n n\u1ebfu <code>project.dashboard_location_filter === true</code></li> <li>Team Filter: Events ch\u1ec9 show n\u1ebfu c\u00f3 staff thu\u1ed9c team config trong Settings</li> <li>Source Priority: Events t\u1eeb integration sync (<code>source: 'third_party'</code>) \u0111\u01b0\u1ee3c \u01b0u ti\u00ean display</li> </ul>"},{"location":"dashboard/calendar/#62-auto-refresh","title":"6.2 Auto Refresh","text":"<ul> <li>Refresh calendar m\u1ed7i 5 ph\u00fat (ho\u1eb7c manual refresh)</li> <li>WebSocket real-time updates khi c\u00f3 event m\u1edbi/s\u1eeda/x\u00f3a</li> </ul>"},{"location":"dashboard/calendar/#63-timezone-handling","title":"6.3 Timezone Handling","text":"<ul> <li>L\u01b0u <code>timezone</code> trong event</li> <li>Convert timestamp theo timezone c\u1ee7a user khi display</li> <li>Default timezone: <code>project.timezone</code></li> </ul>"},{"location":"dashboard/calendar/#64-event-colors","title":"6.4 Event Colors","text":"<ul> <li>M\u1ed7i event type c\u00f3 <code>backgroundColor</code> v\u00e0 <code>borderColor</code> ri\u00eang</li> <li>Custom events: m\u00e0u default t\u1eeb theme</li> <li>Integration events: m\u00e0u theo calendar source</li> </ul>"},{"location":"dashboard/calendar/#65-permissions","title":"6.5 Permissions","text":"<ul> <li>Staff role <code>staff</code> kh\u00f4ng th\u1ec3 x\u00f3a events</li> <li>Ch\u1ec9 owner ho\u1eb7c admin m\u1edbi c\u00f3 th\u1ec3 delete/edit events</li> <li>Integration sync events: read-only, kh\u00f4ng edit \u0111\u01b0\u1ee3c</li> </ul>"},{"location":"dashboard/calendar/#7-component-structure","title":"7. Component Structure","text":"<pre><code>pages/apps/calendar.tsx\n\u2514\u2500\u2500 containers/apps/calendar/\n    \u251c\u2500\u2500 wrapper/\n    \u251c\u2500\u2500 sidebar/          # Mini calendar, event list\n    \u2514\u2500\u2500 main/\n        \u251c\u2500\u2500 calendar-header/\n        \u2514\u2500\u2500 FullCalendar component\n            \u251c\u2500\u2500 dayGridPlugin\n            \u251c\u2500\u2500 timeGridPlugin\n            \u251c\u2500\u2500 interactionPlugin\n            \u2514\u2500\u2500 resourceTimelinePlugin\n</code></pre>"},{"location":"dashboard/calendar/#8-dependencies","title":"8. Dependencies","text":"<ul> <li><code>@fullcalendar/react</code> - Calendar UI</li> <li><code>@fullcalendar/daygrid</code> - Month view</li> <li><code>@fullcalendar/timegrid</code> - Week/Day view</li> <li><code>@fullcalendar/interaction</code> - Click/drag interactions</li> <li><code>@tanstack/react-query</code> - Data fetching</li> </ul>"},{"location":"dashboard/calls/","title":"Calls Screen - Qu\u1ea3n l\u00fd cu\u1ed9c g\u1ecdi","text":""},{"location":"dashboard/calls/#1-gioi-thieu","title":"1. Gi\u1edbi thi\u1ec7u","text":"<p>M\u00e0n h\u00ecnh Calls qu\u1ea3n l\u00fd t\u1ea5t c\u1ea3 cu\u1ed9c g\u1ecdi voice (inbound/outbound) qua Twilio integration.</p> <p>Routes: - <code>/calls</code> - Danh s\u00e1ch t\u1ea5t c\u1ea3 cu\u1ed9c g\u1ecdi - <code>/calls/:id</code> - Chi ti\u1ebft cu\u1ed9c g\u1ecdi c\u1ee5 th\u1ec3</p> <p>Scope: Xem l\u1ecbch s\u1eed cu\u1ed9c g\u1ecdi, nghe recording, g\u1ecdi \u0111i\u1ec7n, xem chi ti\u1ebft lead, t\u1ea1o meeting room.</p>"},{"location":"dashboard/calls/#2-yeu-cau-chuc-nang","title":"2. Y\u00eau c\u1ea7u ch\u1ee9c n\u0103ng","text":""},{"location":"dashboard/calls/#21-hien-thi-calls","title":"2.1 Hi\u1ec3n th\u1ecb Calls","text":"<ul> <li>Danh s\u00e1ch cu\u1ed9c g\u1ecdi v\u1edbi th\u00f4ng tin:</li> <li>Direction: <code>inbound</code> | <code>outbound</code></li> <li>Status: <code>initiated</code>, <code>completed</code>, <code>busy</code>, <code>no-answer</code>, <code>voicemail</code>, <code>failed</code>, <code>cancelled</code></li> <li>From/To phone numbers</li> <li>Duration (gi\u00e2y)</li> <li>Recording URL</li> <li>Lead information</li> <li>Timestamp</li> <li>Pagination</li> <li>Search theo keyword (phone number, lead name)</li> <li>Filter voicemails: <code>get_voicemail=true</code></li> </ul>"},{"location":"dashboard/calls/#22-chi-tiet-call","title":"2.2 Chi ti\u1ebft Call","text":"<ul> <li>Th\u00f4ng tin cu\u1ed9c g\u1ecdi \u0111\u1ea7y \u0111\u1ee7</li> <li>Play recording (n\u1ebfu c\u00f3)</li> <li>Lead details sidebar</li> <li>Messages history v\u1edbi lead</li> <li>T\u1ea1o ticket t\u1eeb call</li> <li>T\u1ea1o meeting room</li> </ul>"},{"location":"dashboard/calls/#23-goi-ien","title":"2.3 G\u1ecdi \u0111i\u1ec7n","text":"<ul> <li>Outbound call qua Twilio Device</li> <li>Incoming call notification</li> <li>Active call controls:</li> <li>Mute/Unmute</li> <li>Hold/Unhold</li> <li>Hangup</li> <li>Transfer (n\u1ebfu c\u00f3)</li> <li>Call duration timer</li> </ul>"},{"location":"dashboard/calls/#24-voicemail","title":"2.4 Voicemail","text":"<ul> <li>L\u1ecdc calls c\u00f3 status <code>voicemail</code></li> <li>Play voicemail recording</li> <li>Mark as listened</li> <li>Delete voicemail</li> </ul>"},{"location":"dashboard/calls/#3-api-endpoints","title":"3. API Endpoints","text":"Method Endpoint M\u1ee5c \u0111\u00edch Params Response GET <code>/api/calls</code> L\u1ea5y danh s\u00e1ch calls <code>page</code>, <code>keyword?</code>, <code>get_voicemail?</code> <code>CommonPagination&lt;Call&gt;</code> GET <code>/api/calls/:id</code> L\u1ea5y chi ti\u1ebft call <code>id</code> <code>Call</code> POST <code>/api/calls</code> T\u1ea1o call record <code>CreateCallForm</code> <code>Call</code> PUT <code>/api/calls/:id</code> C\u1eadp nh\u1eadt call <code>id</code>, <code>UpdateCallForm</code> <code>Call</code> DELETE <code>/api/calls/:id</code> X\u00f3a call <code>id</code> <code>Call</code> GET <code>/api/calls/get-active-call/:leadId</code> L\u1ea5y active call c\u1ee7a lead <code>leadId</code> <code>DailyRoomResponse</code> POST <code>/api/webhook/dailyco/meeting-ended</code> End meeting/call <code>call_id</code>, <code>status?</code> <code>unknown</code>"},{"location":"dashboard/calls/#31-createcallform","title":"3.1 CreateCallForm","text":"<pre><code>{\n  call_sid?: string;              // Twilio Call SID\n  form_id?: number;               // Form ID (n\u1ebfu call t\u1eeb form)\n  from_phone_number?: string;     // S\u1ed1 g\u1ecdi \u0111i\n  to_phone_number: string;        // S\u1ed1 nh\u1eadn (required)\n  location?: string;              // Location\n  recording?: string;             // Recording URL\n  duration?: number;              // Duration in seconds\n  status: \"initiated\" | \"completed\" | \"busy\" | \"no-answer\";\n  lead_id: number;                // Lead ID (required)\n  direction: \"inbound\" | \"outbound\"; // Direction (required)\n}\n</code></pre>"},{"location":"dashboard/calls/#32-updatecallform","title":"3.2 UpdateCallForm","text":"<pre><code>{\n  call_sid?: string;\n  form_id?: number;\n  from_phone_number?: string;\n  to_phone_number?: string;\n  location?: string;\n  recording?: string;\n  duration?: number;\n  status?: \"initiated\" | \"completed\" | \"busy\" | \"no-answer\" | \"voicemail\" | \"failed\" | \"cancelled\";\n  lead_id?: number;\n  direction?: \"inbound\" | \"outbound\";\n  listened?: boolean;             // Mark voicemail as listened\n}\n</code></pre>"},{"location":"dashboard/calls/#4-websocket-events","title":"4. WebSocket Events","text":"Event Type Trigger Action <code>NEW_MESSAGE</code> Tin nh\u1eafn m\u1edbi t\u1eeb lead trong call Invalidate <code>['messages', leadId]</code> <code>MESSAGE_UPDATED</code> Tin nh\u1eafn \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt Invalidate <code>['messages', leadId]</code> <code>CALL_UPDATED</code> Call status thay \u0111\u1ed5i Invalidate <code>['getDataCalls']</code>, refresh UI"},{"location":"dashboard/calls/#5-redux-state","title":"5. Redux State","text":""},{"location":"dashboard/calls/#51-call-state","title":"5.1 Call State","text":"<ul> <li><code>call.device</code> - Twilio Device instance</li> <li><code>call.currentCall</code> - Current active call</li> <li><code>call.callStatus</code> - Call status (Call.State.Open, etc.)</li> <li><code>call.call_id</code> - Current call ID</li> <li><code>call.callPage</code> - Current page number</li> <li><code>call.calleNumber</code> - S\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111ang g\u1ecdi</li> <li><code>call.dialerNumber</code> - S\u1ed1 \u0111i\u1ec7n tho\u1ea1i nh\u1eadn</li> <li><code>call.isCallPage</code> - Flag \u0111ang \u1edf trang calls</li> </ul>"},{"location":"dashboard/calls/#52-actions","title":"5.2 Actions","text":"<ul> <li><code>onCallRegistered()</code> - Register incoming call</li> <li><code>onCalleNumberChange()</code> - Change caller number</li> <li><code>onDurationChange()</code> - Update call duration</li> <li><code>onSetCallPage()</code> - Set page number</li> </ul>"},{"location":"dashboard/calls/#6-luu-y-ky-thuat","title":"6. L\u01b0u \u00fd k\u1ef9 thu\u1eadt","text":""},{"location":"dashboard/calls/#61-twilio-integration","title":"6.1 Twilio Integration","text":"<ul> <li>Twilio Device SDK \u0111\u1ec3 handle calls</li> <li>Device events:   <pre><code>twilioDevice.on('incoming', (incoming_call) =&gt; {\n  // Handle incoming call\n});\n\ntwilioDevice.on('error', (error) =&gt; {\n  // Handle error\n});\n</code></pre></li> </ul>"},{"location":"dashboard/calls/#62-call-duration-timer","title":"6.2 Call Duration Timer","text":"<ul> <li>Update m\u1ed7i 1 gi\u00e2y khi call \u0111ang active</li> <li>Use <code>useInterval</code> hook:   <pre><code>useInterval(\n  () =&gt; {\n    dispatch(onDurationChange({ duration: Date.now() }));\n  },\n  callStatus === Call.State.Open ? 1000 : null\n);\n</code></pre></li> </ul>"},{"location":"dashboard/calls/#63-prevent-page-refresh-during-call","title":"6.3 Prevent Page Refresh During Call","text":"<pre><code>const preventRefresh = (event) =&gt; {\n  if (currentCall) {\n    event.preventDefault();\n    return 'You currently on a call, reloading the page would end the call.';\n  }\n};\n</code></pre>"},{"location":"dashboard/calls/#64-active-call-component","title":"6.4 Active Call Component","text":"<ul> <li>Hi\u1ec3n th\u1ecb \u1edf bottom-right m\u1ecdi trang (tr\u1eeb invalid routes)</li> <li>Position: <code>bottom: 2rem</code></li> <li>Sticky component, kh\u00f4ng b\u1ecb \u1ea9n khi navigate</li> </ul>"},{"location":"dashboard/calls/#65-voicemail-filter","title":"6.5 Voicemail Filter","text":"<ul> <li>Param: <code>get_voicemail=true</code></li> <li>Ch\u1ec9 l\u1ea5y calls c\u00f3 <code>status === 'voicemail'</code></li> <li>Mark as listened: <code>PUT /api/calls/:id</code> v\u1edbi <code>listened: true</code></li> </ul>"},{"location":"dashboard/calls/#7-component-structure","title":"7. Component Structure","text":"<pre><code>pages/apps/calls.tsx\n\u2514\u2500\u2500 containers/apps/\n    \u251c\u2500\u2500 ticket/sidebar/       # Shared sidebar\n    \u251c\u2500\u2500 calls/\n    \u2502   \u251c\u2500\u2500 group/            # Call list\n    \u2502   \u2514\u2500\u2500 main/             # Call detail &amp; lead info\n    \u2514\u2500\u2500 components/call/\n        \u251c\u2500\u2500 ActiveCall/       # Active call widget\n        \u2514\u2500\u2500 IncomingCall/     # Incoming call notification\n</code></pre>"},{"location":"dashboard/calls/#8-dependencies","title":"8. Dependencies","text":"<ul> <li><code>@twilio/voice-sdk</code> - Twilio Voice SDK</li> <li><code>react-query</code> - Data fetching</li> <li><code>usehooks-ts</code> - useInterval hook</li> <li><code>react-toastify</code> - Notifications</li> </ul>"},{"location":"dashboard/calls/#9-call-flow","title":"9. Call Flow","text":""},{"location":"dashboard/calls/#91-outbound-call","title":"9.1 Outbound Call","text":"<ol> <li>User nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i ho\u1eb7c click call t\u1eeb lead</li> <li><code>onCalleNumberChange()</code> set s\u1ed1 \u0111i\u1ec7n tho\u1ea1i</li> <li>Twilio Device initiate call</li> <li><code>POST /api/calls</code> t\u1ea1o call record</li> <li>Call status updates: <code>initiated</code> \u2192 <code>completed</code>/<code>busy</code>/<code>no-answer</code></li> <li>Recording saved (n\u1ebfu c\u00f3)</li> </ol>"},{"location":"dashboard/calls/#92-inbound-call","title":"9.2 Inbound Call","text":"<ol> <li>Twilio webhook trigger incoming call</li> <li><code>twilioDevice.on('incoming')</code> event</li> <li><code>onCallRegistered()</code> register call</li> <li>Show IncomingCall component</li> <li>User accept/reject</li> <li><code>POST /api/calls</code> t\u1ea1o call record</li> <li>Call status updates</li> </ol>"},{"location":"dashboard/calls/#10-permissions","title":"10. Permissions","text":"<ul> <li>All roles: C\u00f3 th\u1ec3 g\u1ecdi \u0111i\u1ec7n, xem calls</li> <li>Staff: Ch\u1ec9 xem calls c\u1ee7a m\u00ecnh</li> <li>Admin/Owner: Xem t\u1ea5t c\u1ea3 calls</li> </ul>"},{"location":"dashboard/client-portal/","title":"Client Portal Module - Patient Portal","text":""},{"location":"dashboard/client-portal/#1-gioi-thieu","title":"1. Gi\u1edbi thi\u1ec7u","text":"<p>Client Portal (Patient Portal) l\u00e0 portal ri\u00eang cho leads/patients \u0111\u1ec3 xem v\u00e0 qu\u1ea3n l\u00fd th\u00f4ng tin c\u1ee7a h\u1ecd, kh\u00f4ng c\u1ea7n login v\u00e0o dashboard ch\u00ednh.</p> <p>Routes: - <code>/client-portal</code> - Portal dashboard (internal view) - <code>/client/portal/:uuidProject</code> - Client portal (public - for patients)</p> <p>Scope: Patient self-service portal v\u1edbi authentication, view appointments, forms, invoices, payments.</p>"},{"location":"dashboard/client-portal/#2-portal-features","title":"2. Portal Features","text":""},{"location":"dashboard/client-portal/#21-authentication-flow","title":"2.1 Authentication Flow","text":"<pre><code>1. Patient visits /client/portal/:uuidProject\n2. Login screen (phone + verification code)\n3. Verify client info (first name, last name, DOB, phone)\n4. Access portal home\n</code></pre> <p>Steps: - <code>login</code> - Phone verification - <code>verify</code> - Client info confirmation - <code>home</code> - Portal dashboard</p> <p></p>"},{"location":"dashboard/client-portal/#22-portal-tabs","title":"2.2 Portal Tabs","text":""},{"location":"dashboard/client-portal/#tab-1-home","title":"Tab 1: Home","text":"<p>Features: - Overview dashboard - Quick actions - Upcoming appointments - Pending forms - Recent invoices</p> <p></p>"},{"location":"dashboard/client-portal/#tab-2-appointments","title":"Tab 2: Appointments","text":"<p>Features: - View upcoming appointments - View past appointments - Appointment details (date, time, location, procedures) - Appointment stages:   - <code>upcoming</code> - Confirmed future appointments   - <code>in-progress</code> - Currently happening   - <code>previous</code> - Past appointments</p> <p>API: - GET <code>/portal/events</code> - Get appointments   - <code>between[from]</code> - Start timestamp   - <code>between[to]</code> - End timestamp</p> <p></p>"},{"location":"dashboard/client-portal/#tab-3-forms","title":"Tab 3: Forms","text":"<p>Features: - View forms to complete - Fill forms - View completed forms - Form count badge (pending forms)</p> <p>API: - GET <code>/portal/forms</code> - Get forms list - GET <code>/portal/forms/:id</code> - Get form detail - PUT <code>/portal/forms/:id/page/:pageId/response</code> - Fill form - PUT <code>/portal/forms/:id/sign</code> - Sign form - GET <code>/portal/forms/count-to-complete</code> - Get pending count</p> <p></p>"},{"location":"dashboard/client-portal/#tab-4-billing-payments","title":"Tab 4: Billing &amp; Payments","text":"<p>Features: - View invoices - View payment history - Pay invoices (Stripe) - View/update payment method (credit card) - Download invoice PDF</p> <p>API: - GET <code>/portal/invoices</code> - Get invoices - GET <code>/portal/payments</code> - Get payment history - GET <code>/portal/billing/card</code> - Get card info - PUT <code>/portal/billing/card</code> - Update card - POST <code>/portal/invoices/:id/pay/card</code> - Pay invoice - POST <code>/portal/invoices/:id/pdf-payment</code> - Download PDF</p> <p>Payment Flow: <pre><code>1. View invoice\n2. Click \"Pay Now\"\n3. Enter/select payment method (Stripe Elements)\n4. Process payment\n5. Show receipt\n6. Send receipt email\n</code></pre></p> <p></p>"},{"location":"dashboard/client-portal/#tab-5-personal-information","title":"Tab 5: Personal Information","text":"<p>Features: - View personal info - Update profile (first name, last name, DOB, phone, email, address)</p> <p>API: - GET <code>/portal/client-info</code> - Get client info - PUT <code>/portal/client-info</code> - Update client info</p> <p></p>"},{"location":"dashboard/client-portal/#tab-6-files","title":"Tab 6: Files","text":"<p>Features: - View uploaded files - Download files - File types: documents, images, PDFs</p> <p>API: - GET <code>/portal/files</code> - Get files list (limit: 100)</p>"},{"location":"dashboard/client-portal/#3-api-endpoints","title":"3. API Endpoints","text":"Method Endpoint M\u1ee5c \u0111\u00edch Auth Required POST <code>/portal/login/:leadId</code> Login v\u1edbi phone + code No GET <code>/portal/client-info</code> L\u1ea5y client info Yes PUT <code>/portal/client-info</code> Update client info Yes GET <code>/portal/events</code> L\u1ea5y appointments Yes GET <code>/portal/forms</code> L\u1ea5y forms list Yes GET <code>/portal/forms/:id</code> Chi ti\u1ebft form Yes PUT <code>/portal/forms/:id/page/:pageId/response</code> Fill form Yes PUT <code>/portal/forms/:id/sign</code> Sign form Yes GET <code>/portal/forms/count-to-complete</code> Count pending forms Yes GET <code>/portal/invoices</code> L\u1ea5y invoices Yes GET <code>/portal/payments</code> L\u1ea5y payment history Yes GET <code>/portal/billing/card</code> L\u1ea5y card info Yes PUT <code>/portal/billing/card</code> Update card Yes POST <code>/portal/invoices/:id/pay/card</code> Pay invoice Yes POST <code>/portal/invoices/:id/pdf-payment</code> Download invoice PDF Yes GET <code>/portal/files</code> L\u1ea5y files Yes GET <code>/portal/widget-uuid</code> Get widget UUID (for booking) Yes"},{"location":"dashboard/client-portal/#4-authentication","title":"4. Authentication","text":""},{"location":"dashboard/client-portal/#41-login-flow","title":"4.1 Login Flow","text":"<pre><code>POST /portal/login/:leadId\n{\n  phone: string;\n  code: string;        // Verification code sent via SMS\n}\n</code></pre> <p>Process: 1. Patient enters phone number 2. System sends verification code via SMS 3. Patient enters code 4. System verifies code 5. Create session 6. Return client info</p>"},{"location":"dashboard/client-portal/#42-client-info-verification","title":"4.2 Client Info Verification","text":"<p>After login, if client info incomplete: - Required fields: <code>first_name</code>, <code>last_name</code>, <code>date_of_birth</code>, <code>phone</code> - Show verification screen - Patient confirms/updates info - Proceed to portal</p>"},{"location":"dashboard/client-portal/#5-luu-y-ky-thuat","title":"5. L\u01b0u \u00fd k\u1ef9 thu\u1eadt","text":""},{"location":"dashboard/client-portal/#51-project-uuid","title":"5.1 Project UUID","text":"<ul> <li>Portal URL uses <code>uuidProject</code> instead of numeric ID</li> <li>Format: <code>/client/portal/:uuidProject</code></li> <li>UUID maps to project in database</li> </ul>"},{"location":"dashboard/client-portal/#52-stripe-integration","title":"5.2 Stripe Integration","text":"<ul> <li>Uses Stripe Elements for payment form</li> <li>Connected account support (multi-tenant)</li> <li>Stripe account ID from <code>clientInfo.project.owner.stripe_account.stripe_id</code></li> <li>Load Stripe with connected account: <pre><code>loadStripe(STRIPE_KEY, {\n  stripeAccount: connectedAccountId\n})\n</code></pre></li> </ul>"},{"location":"dashboard/client-portal/#53-session-management","title":"5.3 Session Management","text":"<ul> <li>Portal uses separate authentication from main dashboard</li> <li>Session stored in cookies/localStorage</li> <li>Auto-logout after inactivity</li> </ul>"},{"location":"dashboard/client-portal/#54-responsive-design","title":"5.4 Responsive Design","text":"<ul> <li>Mobile-first design</li> <li>Works on phones, tablets, desktops</li> <li>Touch-friendly UI</li> </ul>"},{"location":"dashboard/client-portal/#55-branding","title":"5.5 Branding","text":"<ul> <li>Portal uses project's logo (<code>projectInfo.logo_url</code>)</li> <li>Project name</li> <li>Custom colors (if configured)</li> </ul>"},{"location":"dashboard/client-portal/#6-component-structure","title":"6. Component Structure","text":"<pre><code>pages/apps/client-portal.tsx\n\u2514\u2500\u2500 containers/apps/client-portal/\n    \u251c\u2500\u2500 wrapper/\n    \u2514\u2500\u2500 main/\n        \u251c\u2500\u2500 index.tsx             # Main portal logic\n        \u251c\u2500\u2500 home/                 # Home tab\n        \u251c\u2500\u2500 appointments/         # Appointments tab\n        \u251c\u2500\u2500 forms/                # Forms tab\n        \u251c\u2500\u2500 billing-payments/     # Billing tab (21 components)\n        \u251c\u2500\u2500 personal-information/ # Personal info tab\n        \u2514\u2500\u2500 invoice-main-view.tsx # Invoice detail view\n</code></pre>"},{"location":"dashboard/client-portal/#7-portal-states","title":"7. Portal States","text":""},{"location":"dashboard/client-portal/#71-loading-states","title":"7.1 Loading States","text":"<ul> <li><code>isLoadingHomePage</code> - Initial portal load</li> <li><code>isLoadingFormPortal</code> - Forms loading</li> <li><code>isLoadingEventPortal</code> - Appointments loading</li> <li><code>isLoadingInvoicePortal</code> - Invoices loading</li> <li><code>isLoadingFilePortal</code> - Files loading</li> <li><code>loadingGetCard</code> - Card info loading</li> </ul>"},{"location":"dashboard/client-portal/#72-tab-states","title":"7.2 Tab States","text":"<pre><code>type TabActive = \n  | \"home\" \n  | \"appointments\" \n  | \"forms\" \n  | \"billings\" \n  | \"personal-info\" \n  | \"files\";\n</code></pre>"},{"location":"dashboard/client-portal/#73-step-states","title":"7.3 Step States","text":"<pre><code>type Step = \"login\" | \"verify\" | \"home\";\n</code></pre>"},{"location":"dashboard/client-portal/#8-data-fetching","title":"8. Data Fetching","text":""},{"location":"dashboard/client-portal/#81-appointments","title":"8.1 Appointments","text":"<pre><code>// Upcoming appointments (next 6 months)\ngetEventPortalByLeadIDApi({\n  project_id: projectId,\n  \"between[from]\": moment().unix(),\n  \"between[to]\": moment().add(6, \"months\").unix()\n})\n\n// Past appointments\ngetEventPortalByLeadIDApi({\n  project_id: projectId,\n  \"between[from]\": 1,\n  \"between[to]\": moment().unix()\n})\n</code></pre> <p>Appointment Stages: - <code>in-progress</code> - Event started but not ended - <code>upcoming</code> - Future confirmed events - <code>previous</code> - Past events</p>"},{"location":"dashboard/client-portal/#82-forms","title":"8.2 Forms","text":"<pre><code>getFormPortalByLeadIDApi({\n  project_id: projectId,\n  page?: number\n})\n</code></pre> <p>Pagination: - Load more forms on scroll - Append to existing list</p>"},{"location":"dashboard/client-portal/#83-invoices-payments","title":"8.3 Invoices &amp; Payments","text":"<pre><code>// Invoices\ngetInvoicesPortalByLeadIDApi({\n  project_id: projectId\n})\n\n// Payment history\ngetPaymentPortalByLeadIDApi({\n  project_id: projectId\n})\n</code></pre>"},{"location":"dashboard/client-portal/#9-widget-integration","title":"9. Widget Integration","text":"<p>Portal includes booking widget integration: - Get widget UUID: <code>getWidgetUUID()</code> - Embed booking widget in portal - Allow patients to book new appointments</p>"},{"location":"dashboard/client-portal/#10-security","title":"10. Security","text":""},{"location":"dashboard/client-portal/#101-authentication","title":"10.1 Authentication","text":"<ul> <li>Phone + SMS verification code</li> <li>Session-based authentication</li> <li>Auto-logout after inactivity</li> </ul>"},{"location":"dashboard/client-portal/#102-authorization","title":"10.2 Authorization","text":"<ul> <li>Patients can only view their own data</li> <li>No access to other patients' data</li> <li>Project-scoped data access</li> </ul>"},{"location":"dashboard/client-portal/#103-data-privacy","title":"10.3 Data Privacy","text":"<ul> <li>HIPAA compliant (if configured)</li> <li>Secure payment processing (PCI DSS via Stripe)</li> <li>Encrypted data transmission (HTTPS)</li> </ul>"},{"location":"dashboard/client-portal/#11-mobile-app-integration","title":"11. Mobile App Integration","text":"<p>Portal c\u00f3 link download mobile app: - Send link via SMS - Deep linking support - Seamless transition to mobile app</p>"},{"location":"dashboard/client-portal/#12-notifications","title":"12. Notifications","text":"<p>Portal supports notifications: - New form assigned - Appointment reminder - Invoice due - Payment received</p>"},{"location":"dashboard/client-portal/#13-uiux-notes","title":"13. UI/UX Notes","text":""},{"location":"dashboard/client-portal/#141-design-principles","title":"14.1 Design Principles","text":"<ul> <li>Clean, simple interface</li> <li>Patient-friendly language</li> <li>Clear call-to-actions</li> <li>Minimal clicks to complete tasks</li> </ul>"},{"location":"dashboard/client-portal/#142-accessibility","title":"14.2 Accessibility","text":"<ul> <li>WCAG 2.1 AA compliant</li> <li>Screen reader support</li> <li>Keyboard navigation</li> <li>High contrast mode</li> </ul>"},{"location":"dashboard/client-portal/#143-performance","title":"14.3 Performance","text":"<ul> <li>Fast initial load</li> <li>Lazy loading for tabs</li> <li>Optimized images</li> <li>Minimal bundle size</li> </ul>"},{"location":"dashboard/contacts-leads/","title":"Contacts &amp; Leads Module","text":""},{"location":"dashboard/contacts-leads/#1-gioi-thieu","title":"1. Gi\u1edbi thi\u1ec7u","text":""},{"location":"dashboard/contacts-leads/#11-contacts-screen","title":"1.1 Contacts Screen","text":"<p>Qu\u1ea3n l\u00fd t\u1ea5t c\u1ea3 contacts/leads trong h\u1ec7 th\u1ed1ng.</p> <p>Route: <code>/contacts</code></p> <p>Scope: Xem, t\u1ea1o, s\u1eeda, x\u00f3a contacts, import/export, merge duplicates.</p>"},{"location":"dashboard/contacts-leads/#12-leads-screen","title":"1.2 Leads Screen","text":"<p>Chi ti\u1ebft lead c\u1ee5 th\u1ec3 v\u1edbi full information v\u00e0 activity timeline.</p> <p>Route: <code>/leads/:id</code></p> <p>Scope: Xem chi ti\u1ebft lead, edit info, view timeline, create tickets/events/tasks.</p>"},{"location":"dashboard/contacts-leads/#2-contacts-screen","title":"2. Contacts Screen","text":""},{"location":"dashboard/contacts-leads/#21-yeu-cau-chuc-nang","title":"2.1 Y\u00eau c\u1ea7u ch\u1ee9c n\u0103ng","text":"<ul> <li>Danh s\u00e1ch contacts:</li> <li>Grid/List view</li> <li>Filter theo: location, tags, status, source</li> <li>Search theo: name, email, phone</li> <li>Sort theo: name, created_at, updated_at</li> <li>Pagination</li> <li>CRUD Operations:</li> <li>Create contact (manual ho\u1eb7c import CSV)</li> <li>Update contact info</li> <li>Delete contact (single/bulk)</li> <li>Merge duplicate contacts</li> <li>Advanced Features:</li> <li>Import contacts (CSV)</li> <li>Export contacts (CSV/Excel)</li> <li>Bulk operations (tag, delete, assign)</li> <li>Custom fields</li> </ul>"},{"location":"dashboard/contacts-leads/#22-api-endpoints","title":"2.2 API Endpoints","text":"Method Endpoint M\u1ee5c \u0111\u00edch Params GET <code>/api/leads</code> L\u1ea5y danh s\u00e1ch leads <code>page</code>, <code>limit</code>, <code>keyword?</code>, <code>location_id?</code>, <code>tags?</code>, <code>status?</code>, <code>source?</code> GET <code>/api/leads/:id</code> Chi ti\u1ebft lead <code>id</code> POST <code>/api/leads</code> T\u1ea1o lead <code>LeadForm</code> PUT <code>/api/leads/:id</code> C\u1eadp nh\u1eadt lead <code>id</code>, <code>LeadForm</code> DELETE <code>/api/leads/:id</code> X\u00f3a lead <code>id</code> POST <code>/api/leads/import</code> Import leads <code>FormData</code> (CSV file) GET <code>/api/leads/export</code> Export leads <code>format?</code> (csv/excel) POST <code>/api/leads/merge</code> Merge duplicate leads <code>primary_id</code>, <code>secondary_ids[]</code> PUT <code>/api/leads/bulk</code> Bulk update <code>ids[]</code>, <code>action</code>, <code>data</code>"},{"location":"dashboard/contacts-leads/#23-leadform","title":"2.3 LeadForm","text":"<pre><code>{\n  first_name: string;\n  last_name?: string;\n  email?: string;\n  phone?: string;\n  address?: string;\n  city?: string;\n  state?: string;\n  zip?: string;\n  country?: string;\n  location_id?: number;\n  tags?: string[];\n  status?: string;           // 'active' | 'inactive' | 'archived'\n  source?: string;           // 'website' | 'referral' | 'social' | 'manual'\n  custom_fields?: Record&lt;string, any&gt;;\n}\n</code></pre>"},{"location":"dashboard/contacts-leads/#3-leads-detail-screen","title":"3. Leads Detail Screen","text":""},{"location":"dashboard/contacts-leads/#31-yeu-cau-chuc-nang","title":"3.1 Y\u00eau c\u1ea7u ch\u1ee9c n\u0103ng","text":"<ul> <li>Lead Information:</li> <li>Personal info (name, email, phone, address)</li> <li>Custom fields</li> <li>Tags</li> <li>Status</li> <li>Source</li> <li>Location</li> <li>Activity Timeline:</li> <li>Tickets/Conversations</li> <li>Events/Appointments</li> <li>Tasks</li> <li>Calls</li> <li>Messages (SMS, Email)</li> <li>Faxes</li> <li>Notes</li> <li>Files</li> <li>Quick Actions:</li> <li>Call lead</li> <li>Send SMS</li> <li>Send Email</li> <li>Create ticket</li> <li>Create event</li> <li>Create task</li> <li>Upload file</li> </ul>"},{"location":"dashboard/contacts-leads/#32-api-endpoints","title":"3.2 API Endpoints","text":"Method Endpoint M\u1ee5c \u0111\u00edch GET <code>/api/leads/:id</code> L\u1ea5y lead info GET <code>/api/leads/:id/timeline</code> L\u1ea5y activity timeline POST <code>/api/leads/:id/notes</code> T\u1ea1o note GET <code>/api/leads/:id/files</code> L\u1ea5y files POST <code>/api/leads/:id/files</code> Upload file GET <code>/api/leads/:id/tags</code> L\u1ea5y tags POST <code>/api/leads/:id/tags</code> Add tags DELETE <code>/api/leads/:id/tags/:tagId</code> Remove tag"},{"location":"dashboard/contacts-leads/#33-timeline-items","title":"3.3 Timeline Items","text":"<pre><code>TimelineItem {\n  type: 'ticket' | 'event' | 'task' | 'call' | 'message' | 'fax' | 'note' | 'file';\n  id: number;\n  title: string;\n  description?: string;\n  timestamp: Date;\n  staff?: Staff;\n  metadata?: Record&lt;string, any&gt;;\n}\n</code></pre>"},{"location":"dashboard/contacts-leads/#4-websocket-events","title":"4. WebSocket Events","text":"Event Type Trigger Action <code>LEAD_UPDATED</code> Lead info thay \u0111\u1ed5i Invalidate lead query, refresh UI <code>LEAD_ACTIVITY</code> Activity m\u1edbi (ticket, event, call...) Invalidate timeline, update UI"},{"location":"dashboard/contacts-leads/#5-redux-state","title":"5. Redux State","text":""},{"location":"dashboard/contacts-leads/#51-contact-state","title":"5.1 Contact State","text":"<ul> <li><code>contact.lead.lead</code> - Current lead</li> <li><code>contact.lead.loading</code> - Loading state</li> <li><code>contact.list</code> - Contacts list</li> <li><code>contact.filters</code> - Current filters</li> </ul>"},{"location":"dashboard/contacts-leads/#52-actions","title":"5.2 Actions","text":"<ul> <li><code>doSetLoadingLead()</code> - Set loading</li> <li><code>doFetchLead()</code> - Fetch lead detail</li> <li><code>doUpdateLead()</code> - Update lead</li> <li><code>doDeleteLead()</code> - Delete lead</li> </ul>"},{"location":"dashboard/contacts-leads/#6-luu-y-ky-thuat","title":"6. L\u01b0u \u00fd k\u1ef9 thu\u1eadt","text":""},{"location":"dashboard/contacts-leads/#61-import-contacts","title":"6.1 Import Contacts","text":"<ul> <li>Support CSV format</li> <li>Required columns: <code>first_name</code>, <code>email</code> ho\u1eb7c <code>phone</code></li> <li>Optional columns: <code>last_name</code>, <code>address</code>, <code>city</code>, <code>state</code>, <code>zip</code>, <code>tags</code></li> <li>Validate data tr\u01b0\u1edbc khi import</li> <li>Show preview tr\u01b0\u1edbc khi confirm</li> <li>Handle duplicates (skip/update/merge)</li> </ul>"},{"location":"dashboard/contacts-leads/#62-export-contacts","title":"6.2 Export Contacts","text":"<ul> <li>Export to CSV ho\u1eb7c Excel</li> <li>Include all fields + custom fields</li> <li>Filter/search applied tr\u01b0\u1edbc khi export</li> <li>Download file tr\u1ef1c ti\u1ebfp</li> </ul>"},{"location":"dashboard/contacts-leads/#63-merge-duplicates","title":"6.3 Merge Duplicates","text":"<ul> <li>Detect duplicates by: email, phone, name</li> <li>Select primary lead (keep)</li> <li>Select secondary leads (merge into primary)</li> <li>Merge logic:</li> <li>Keep primary lead info</li> <li>Merge timeline/activities t\u1eeb secondary leads</li> <li>Update references (tickets, events, tasks...)</li> <li>Delete secondary leads</li> </ul>"},{"location":"dashboard/contacts-leads/#64-custom-fields","title":"6.4 Custom Fields","text":"<ul> <li>Dynamic custom fields per project</li> <li>Support types: text, number, date, dropdown, checkbox</li> <li>Store trong <code>custom_fields</code> JSON column</li> <li>Render dynamic form fields</li> </ul>"},{"location":"dashboard/contacts-leads/#65-location-filter","title":"6.5 Location Filter","text":"<ul> <li>Ch\u1ec9 show n\u1ebfu <code>project.dashboard_location_filter === true</code></li> <li>Filter leads theo location</li> <li>Default: all locations (<code>location_id = -1</code>)</li> </ul>"},{"location":"dashboard/contacts-leads/#7-component-structure","title":"7. Component Structure","text":"<pre><code>pages/apps/contacts.tsx\n\u2514\u2500\u2500 containers/apps/contacts/\n    \u251c\u2500\u2500 wrapper/\n    \u251c\u2500\u2500 sidebar/              # Filters, search\n    \u251c\u2500\u2500 main/                 # Contacts grid/list\n    \u2514\u2500\u2500 modals/\n        \u251c\u2500\u2500 create-contact/\n        \u251c\u2500\u2500 edit-contact/\n        \u251c\u2500\u2500 import-contacts/\n        \u2514\u2500\u2500 merge-contacts/\n\npages/apps/leads.tsx\n\u2514\u2500\u2500 containers/apps/leads/\n    \u251c\u2500\u2500 header/               # Lead info, quick actions\n    \u251c\u2500\u2500 timeline/             # Activity timeline\n    \u2514\u2500\u2500 sidebar/              # Lead details, tags, files\n</code></pre>"},{"location":"dashboard/contacts-leads/#8-permissions","title":"8. Permissions","text":"<ul> <li>All roles: C\u00f3 th\u1ec3 view contacts</li> <li>Staff: Ch\u1ec9 view contacts \u0111\u01b0\u1ee3c assign ho\u1eb7c trong tickets</li> <li>Admin/Owner: View t\u1ea5t c\u1ea3 contacts, import/export, merge</li> </ul>"},{"location":"dashboard/contacts-leads/#9-subscription-limits","title":"9. Subscription Limits","text":"<ul> <li>Contact Limit: Theo subscription plan</li> <li>Show modal upgrade khi reach limit</li> <li>Check <code>subscription.quantity</code> vs current contact count</li> <li>Prevent create/import khi over limit</li> </ul>"},{"location":"dashboard/fax/","title":"Fax Screen - Qu\u1ea3n l\u00fd fax","text":""},{"location":"dashboard/fax/#1-gioi-thieu","title":"1. Gi\u1edbi thi\u1ec7u","text":"<p>M\u00e0n h\u00ecnh Fax qu\u1ea3n l\u00fd g\u1eedi/nh\u1eadn fax qua Twilio Programmable Fax.</p> <p>Routes: - <code>/fax</code> - Danh s\u00e1ch t\u1ea5t c\u1ea3 fax messages - <code>/fax/:id</code> - Chi ti\u1ebft fax message c\u1ee5 th\u1ec3</p> <p>Scope: Xem, g\u1eedi, nh\u1eadn fax, qu\u1ea3n l\u00fd fax phone numbers.</p>"},{"location":"dashboard/fax/#2-yeu-cau-chuc-nang","title":"2. Y\u00eau c\u1ea7u ch\u1ee9c n\u0103ng","text":""},{"location":"dashboard/fax/#21-hien-thi-fax-messages","title":"2.1 Hi\u1ec3n th\u1ecb Fax Messages","text":"<ul> <li>Danh s\u00e1ch fax messages (inbound/outbound)</li> <li>Th\u00f4ng tin hi\u1ec3n th\u1ecb:</li> <li>Direction: <code>inbound</code> | <code>outbound</code></li> <li>From/To fax number</li> <li>Lead information</li> <li>Status: <code>sent</code>, <code>delivered</code>, <code>failed</code>, <code>received</code></li> <li>Number of pages</li> <li>Media URL (PDF)</li> <li>Timestamp</li> <li>Pagination</li> <li>Search theo keyword</li> </ul>"},{"location":"dashboard/fax/#22-chi-tiet-fax","title":"2.2 Chi ti\u1ebft Fax","text":"<ul> <li>View fax PDF</li> <li>Download fax</li> <li>Lead details</li> <li>Attach to lead (n\u1ebfu ch\u01b0a c\u00f3)</li> <li>Resend fax (n\u1ebfu failed)</li> </ul>"},{"location":"dashboard/fax/#23-gui-fax","title":"2.3 G\u1eedi Fax","text":"<ul> <li>Upload PDF/image file</li> <li>Enter recipient fax number</li> <li>Select from fax number (channel)</li> <li>Send fax</li> <li>Track delivery status</li> </ul>"},{"location":"dashboard/fax/#24-quan-ly-fax-numbers","title":"2.4 Qu\u1ea3n l\u00fd Fax Numbers","text":"<ul> <li>Danh s\u00e1ch fax phone numbers</li> <li>Purchase new fax number</li> <li>Search available numbers by:</li> <li>Country code</li> <li>Area code</li> <li>Locality</li> <li>Delete fax number</li> </ul>"},{"location":"dashboard/fax/#3-api-endpoints","title":"3. API Endpoints","text":"Method Endpoint M\u1ee5c \u0111\u00edch Params Response GET <code>/api/fax-messages</code> L\u1ea5y danh s\u00e1ch fax messages <code>limit?</code>, <code>page?</code> <code>CommonPagination&lt;Message&gt;</code> GET <code>/api/fax-channels</code> L\u1ea5y danh s\u00e1ch fax numbers <code>limit?</code>, <code>page?</code> <code>CommonPagination&lt;Fax&gt;</code> GET <code>/api/phone-numbers/fax/available</code> Search available fax numbers <code>country_code</code>, <code>area_code</code> <code>AvailablePhone[]</code> POST <code>/api/phone-number/purchase</code> Purchase fax number <code>phone_number</code> <code>unknown</code> POST <code>/api/send-fax</code> G\u1eedi fax <code>FormData</code> (file + recipient) <code>unknown</code> PUT <code>/api/fax-messages/message/:id/lead/:leadId/attach</code> Attach fax to lead <code>id</code>, <code>lead_id</code> <code>unknown</code>"},{"location":"dashboard/fax/#31-send-fax-params","title":"3.1 Send Fax Params","text":"<pre><code>FormData {\n  file: File;              // PDF or image file\n  to: string;              // Recipient fax number (E.164 format)\n  from: string;            // Sender fax number (from fax channels)\n  lead_id?: number;        // Optional lead ID\n}\n</code></pre>"},{"location":"dashboard/fax/#32-purchase-fax-number","title":"3.2 Purchase Fax Number","text":"<pre><code>{\n  phone_number: string;    // E.164 format: +1234567890\n}\n</code></pre>"},{"location":"dashboard/fax/#33-search-available-numbers","title":"3.3 Search Available Numbers","text":"<pre><code>{\n  country_code: string;    // e.g., \"US\", \"CA\"\n  area_code: string;       // e.g., \"415\", \"212\"\n}\n\nResponse: AvailablePhone[] {\n  phone_number: string;\n  locality: string;        // City name\n}\n</code></pre>"},{"location":"dashboard/fax/#4-websocket-events","title":"4. WebSocket Events","text":"Event Type Trigger Action <code>NEW_FAX</code> Fax m\u1edbi nh\u1eadn \u0111\u01b0\u1ee3c Invalidate fax messages query, show notification <code>FAX_STATUS_UPDATED</code> Fax status thay \u0111\u1ed5i Update delivery status, refresh UI"},{"location":"dashboard/fax/#5-luu-y-ky-thuat","title":"5. L\u01b0u \u00fd k\u1ef9 thu\u1eadt","text":""},{"location":"dashboard/fax/#51-file-upload","title":"5.1 File Upload","text":"<ul> <li>Support formats: PDF, JPEG, PNG, TIFF</li> <li>Max file size: 10MB (check Twilio limits)</li> <li>Convert images to PDF tr\u01b0\u1edbc khi send (n\u1ebfu c\u1ea7n)</li> <li>Preview file tr\u01b0\u1edbc khi send</li> </ul>"},{"location":"dashboard/fax/#52-phone-number-format","title":"5.2 Phone Number Format","text":"<ul> <li>Use E.164 format: <code>+[country code][number]</code></li> <li>Example: <code>+14155551234</code></li> <li>Validate format tr\u01b0\u1edbc khi send/purchase</li> </ul>"},{"location":"dashboard/fax/#53-fax-delivery-status","title":"5.3 Fax Delivery Status","text":"<ul> <li>Queued: Fax \u0111ang ch\u1edd g\u1eedi</li> <li>Sending: \u0110ang g\u1eedi</li> <li>Delivered: G\u1eedi th\u00e0nh c\u00f4ng</li> <li>Failed: G\u1eedi th\u1ea5t b\u1ea1i (busy, no-answer, error)</li> <li>Received: Nh\u1eadn fax th\u00e0nh c\u00f4ng</li> </ul>"},{"location":"dashboard/fax/#54-attach-to-lead","title":"5.4 Attach to Lead","text":"<ul> <li>Fax inbound c\u00f3 th\u1ec3 ch\u01b0a c\u00f3 lead</li> <li>Manual attach fax to lead:   <pre><code>PUT /api/fax-messages/message/:id/lead/:leadId/attach\n</code></pre></li> <li>Auto-match lead by phone number (n\u1ebfu c\u00f3)</li> </ul>"},{"location":"dashboard/fax/#55-fax-channels","title":"5.5 Fax Channels","text":"<ul> <li>M\u1ed7i fax number l\u00e0 1 channel</li> <li>Purchase number \u2192 t\u1ea1o fax channel</li> <li>Delete channel \u2192 release number (charge may apply)</li> </ul>"},{"location":"dashboard/fax/#6-component-structure","title":"6. Component Structure","text":"<pre><code>pages/apps/faxes.tsx\n\u2514\u2500\u2500 containers/apps/\n    \u251c\u2500\u2500 ticket/\n    \u2502   \u251c\u2500\u2500 sidebar/          # Sidebar\n    \u2502   \u2514\u2500\u2500 fax/              # Fax list group\n    \u2514\u2500\u2500 fax/                  # Fax detail &amp; send form\n</code></pre>"},{"location":"dashboard/fax/#7-fax-workflow","title":"7. Fax Workflow","text":""},{"location":"dashboard/fax/#71-send-fax","title":"7.1 Send Fax","text":"<ol> <li>User upload PDF/image file</li> <li>Select from fax number (channel)</li> <li>Enter recipient fax number</li> <li>Optional: select lead</li> <li>Click Send</li> <li><code>POST /api/send-fax</code> v\u1edbi FormData</li> <li>Track delivery status via webhook/polling</li> </ol>"},{"location":"dashboard/fax/#72-receive-fax","title":"7.2 Receive Fax","text":"<ol> <li>Twilio webhook trigger khi nh\u1eadn fax</li> <li>Backend t\u1ea1o fax message record</li> <li>WebSocket notify frontend</li> <li>Show notification</li> <li>User view/download fax</li> <li>Attach to lead (manual ho\u1eb7c auto-match)</li> </ol>"},{"location":"dashboard/fax/#73-purchase-fax-number","title":"7.3 Purchase Fax Number","text":"<ol> <li>User search available numbers</li> <li><code>GET /api/phone-numbers/fax/available</code></li> <li>Select number from list</li> <li><code>POST /api/phone-number/purchase</code></li> <li>Number added to fax channels</li> <li>Ready to send/receive fax</li> </ol>"},{"location":"dashboard/fax/#8-permissions","title":"8. Permissions","text":"<ul> <li>All roles: C\u00f3 th\u1ec3 g\u1eedi/nh\u1eadn fax</li> <li>Admin/Owner: Purchase/delete fax numbers</li> </ul>"},{"location":"dashboard/forms/","title":"Forms Module - PDF-based Templates v\u1edbi E-Signature","text":""},{"location":"dashboard/forms/#1-gioi-thieu","title":"1. Gi\u1edbi thi\u1ec7u","text":"<p>Module Forms qu\u1ea3n l\u00fd PDF-based templates v\u1edbi e-signature support. Forms \u0111\u01b0\u1ee3c t\u1ea1o t\u1eeb PDF templates, th\u00eam custom fields overlay, v\u00e0 g\u1eedi cho leads/staffs \u0111\u1ec3 \u0111i\u1ec1n v\u00e0 k\u00fd.</p> <p>Routes: - <code>/forms</code> - Danh s\u00e1ch templates v\u00e0 forms - <code>/forms/:id</code> - Template editor ho\u1eb7c form viewer - <code>/client/portal/:uuidProject/forms/:id</code> - Form trong client portal - <code>/:projectId/template/:id</code> - Public form template - <code>/forms/sign-complete</code> - Trang ho\u00e0n th\u00e0nh k\u00fd</p> <p>Scope: T\u1ea1o PDF templates, add custom fields, send forms, collect signatures, view submissions.</p>"},{"location":"dashboard/forms/#2-yeu-cau-chuc-nang","title":"2. Y\u00eau c\u1ea7u ch\u1ee9c n\u0103ng","text":""},{"location":"dashboard/forms/#21-template-management","title":"2.1 Template Management","text":"<ul> <li>CRUD Templates:</li> <li>Create template (upload PDF ho\u1eb7c create blank)</li> <li>Edit template (add/remove pages, add fields)</li> <li>Delete template</li> <li>Duplicate template</li> <li>Mark as favorite</li> <li>Template Types:</li> <li><code>pdf</code> - PDF document</li> <li><code>form</code> - Form template</li> <li><code>document</code> - General document</li> <li><code>email</code> - Email template</li> <li><code>sms</code> - SMS template</li> <li><code>note</code> - Note template</li> <li><code>quick_reply</code> - Quick reply template</li> </ul>"},{"location":"dashboard/forms/#22-template-editor","title":"2.2 Template Editor","text":"<ul> <li>Upload PDF Pages:</li> <li>Upload PDF file</li> <li>Convert to pages</li> <li>Add/remove pages</li> <li>Reorder pages</li> <li>Add Custom Fields:</li> <li>Drag-drop fields onto PDF pages</li> <li>Position fields (x, y coordinates)</li> <li>Resize fields (width, height)</li> <li>Field types (xem section 3.2)</li> </ul> <ul> <li>Field Configuration:</li> <li>Set required/optional</li> <li>Set default value</li> <li>Set placeholder</li> <li>Assign to signatory (lead/staff)</li> <li>Set field color</li> <li>Set font size</li> </ul>"},{"location":"dashboard/forms/#23-form-distribution","title":"2.3 Form Distribution","text":"<ul> <li>Send to Leads:</li> <li>Create form from template</li> <li>Assign signatories (lead + staff n\u1ebfu c\u1ea7n)</li> <li>Set due date</li> <li>Send via email/SMS</li> <li>Client portal access</li> <li>Public Forms:</li> <li>Public link (kh\u00f4ng c\u1ea7n login)</li> <li>Require authentication option</li> <li>Signature verification</li> </ul>"},{"location":"dashboard/forms/#24-form-filling-signing","title":"2.4 Form Filling &amp; Signing","text":"<ul> <li>Fill Form:</li> <li>Lead fills custom fields</li> <li>Save progress (draft)</li> <li>Multi-page forms</li> <li>E-Signature Flow:</li> <li>Lead fills all required fields</li> <li>Lead signs (signature field)</li> <li>If require staff signature \u2192 staff signs</li> <li>Form status = completed</li> <li>Generate signed PDF</li> </ul> <ul> <li>Signature Types:</li> <li><code>signature</code> - Full signature</li> <li><code>initials</code> - Initials only</li> </ul>"},{"location":"dashboard/forms/#25-form-submissions","title":"2.5 Form Submissions","text":"<ul> <li>View Submissions:</li> <li>List all forms</li> <li>Filter by: status, signing_status, lead, template</li> <li>View filled form (PDF with responses)</li> <li>Download signed PDF</li> <li>Form Status:</li> <li><code>draft</code> - Ch\u01b0a ho\u00e0n th\u00e0nh</li> <li><code>completed</code> - \u0110\u00e3 \u0111i\u1ec1n xong</li> <li>(Status values c\u1ea7n verify th\u00eam)</li> <li>Signing Status:</li> <li><code>pending_lead_signature</code> - Ch\u1edd lead k\u00fd</li> <li><code>pending_staff_signature</code> - Ch\u1edd staff k\u00fd</li> <li><code>signed</code> - \u0110\u00e3 k\u00fd \u0111\u1ea7y \u0111\u1ee7</li> </ul>"},{"location":"dashboard/forms/#3-api-endpoints","title":"3. API Endpoints","text":"Method Endpoint M\u1ee5c \u0111\u00edch Params Response GET <code>/api/templates</code> L\u1ea5y danh s\u00e1ch templates <code>name?</code>, <code>type?</code>, <code>types?</code>, <code>keyword?</code>, <code>status?</code>, <code>page?</code>, <code>limit?</code> <code>CommonPagination&lt;TemplateInfo&gt;</code> GET <code>/api/templates/:id</code> Chi ti\u1ebft template <code>id</code> <code>Template</code> POST <code>/api/templates</code> T\u1ea1o template <code>CreateNewTemplateRequestParams</code> <code>Template</code> PUT <code>/api/templates/:id</code> C\u1eadp nh\u1eadt template <code>id</code>, <code>UpdateTemplateRequest</code> <code>Template</code> DELETE <code>/api/templates/:id</code> X\u00f3a template <code>id</code> <code>void</code> POST <code>/api/templates/:id/duplicate</code> Duplicate template <code>id</code> <code>Template</code> POST <code>/api/templates/:id/page</code> Upload PDF page <code>id</code>, <code>FormData</code> (PDF file) <code>Template</code> PUT <code>/api/templates/:id/page/:pageId</code> Update page <code>id</code>, <code>pageId</code>, <code>contents</code>, <code>width</code>, <code>height</code> <code>void</code> DELETE <code>/api/templates/:id/page/:pageId</code> Delete page <code>id</code>, <code>pageId</code> <code>void</code> POST <code>/api/templates/:id/page/:pageId/field</code> Add custom field <code>id</code>, <code>pageId</code>, <code>CreateNewCustomFieldParams</code> <code>CustomField</code> PUT <code>/api/templates/:id/page/:pageId/field/:fieldId</code> Update field <code>id</code>, <code>pageId</code>, <code>fieldId</code>, <code>UpdateCustomFieldParams</code> <code>CustomField</code> DELETE <code>/api/templates/:id/page/:pageId/field/:fieldId</code> Delete field <code>id</code>, <code>pageId</code>, <code>fieldId</code> <code>void</code> POST <code>/api/templates/:id/page/:pageId/field/copy</code> Copy field <code>id</code>, <code>pageId</code>, <code>CopyCustomFieldParams</code> <code>CustomField</code> PUT <code>/api/templates/:id/page/:pageId/reorder</code> Reorder fields <code>id</code>, <code>pageId</code>, <code>fields[]</code> <code>Template</code> GET <code>/api/forms/:id</code> L\u1ea5y form <code>id</code> <code>Forms</code> PUT <code>/api/forms/:id/page/:pageId/response</code> Update form response <code>id</code>, <code>pageId</code>, <code>custom_fields</code> <code>Forms</code> PUT <code>/api/forms/:id/staff/sign</code> Staff sign form <code>id</code> <code>void</code> GET <code>/portal/forms/:id</code> Lead view form <code>id</code> <code>Forms</code> PUT <code>/portal/forms/:id/page/:pageId/response</code> Lead fill form <code>id</code>, <code>pageId</code>, <code>custom_fields</code> <code>Forms</code> PUT <code>/portal/forms/:id/sign</code> Lead sign form <code>id</code> <code>void</code> POST <code>/api/template/:id/submitting</code> Submit public form <code>template_id</code>, <code>visitor_id</code>, <code>data[]</code> <code>void</code> GET <code>/api/template/:id/download</code> Download template PDF <code>id</code> <code>TemplatePdf[]</code>"},{"location":"dashboard/forms/#31-createnewtemplaterequestparams","title":"3.1 CreateNewTemplateRequestParams","text":"<pre><code>{\n  name: string;\n  type: 'pdf' | 'form' | 'document' | 'email' | 'sms' | 'note' | 'quick_reply' | string;\n  subject?: string;\n  content: any;\n  custom_fields: CustomField[];\n  status: 'draft' | string;\n  template_ids?: number[];      // For batch templates\n}\n</code></pre>"},{"location":"dashboard/forms/#32-custom-field-types-typecustomfield","title":"3.2 Custom Field Types (TypeCustomField)","text":"<pre><code>type TypeCustomField =\n  | \"textarea\"          // Multi-line text\n  | \"checkbox\"          // Checkbox\n  | \"dropdown\"          // Dropdown select\n  | \"signature\"         // Signature field\n  | \"initials\"          // Initials field\n  | \"date\"              // Date picker\n  | \"firstname\"         // First name (auto-fill from lead)\n  | \"lastname\"          // Last name (auto-fill from lead)\n  | \"emailaddress\"      // Email (auto-fill from lead)\n  | \"phonenumber\"       // Phone (auto-fill from lead)\n  | \"dateofbirth\"       // Date of birth (auto-fill from lead)\n  | \"customfield\"       // Custom field\n  | \"address\"           // Address (auto-fill from lead)\n</code></pre>"},{"location":"dashboard/forms/#33-customfield","title":"3.3 CustomField","text":"<pre><code>{\n  id: number;\n  type: TypeCustomField;\n  title: string;\n  description?: string;\n  default_value?: string;\n  position_x: number;           // X coordinate on PDF page\n  position_y: number;           // Y coordinate on PDF page\n  width: number;                // Field width\n  height: number;               // Field height\n  required?: boolean;\n  placeholder?: string;\n  answers?: any;                // For dropdown/checkbox options\n  signatory?: {                 // Assign field to signatory\n    signable_id?: number;\n    signable_type: 'Staff' | 'Lead';\n  };\n  color?: string;               // Field color\n  font_size?: number;\n  order: number;                // Field order\n}\n</code></pre>"},{"location":"dashboard/forms/#34-template","title":"3.4 Template","text":"<pre><code>{\n  id: number;\n  name: string;\n  type: string;\n  pages: TemplatePages[];\n  status?: string;\n  favorite: boolean;\n  require_authentication?: boolean;\n  subject?: string;\n}\n</code></pre>"},{"location":"dashboard/forms/#35-templatepages","title":"3.5 TemplatePages","text":"<pre><code>{\n  id: number;\n  order: number;\n  custom_fields: CustomField[];\n  file: {\n    mime_type: string;          // 'application/pdf'\n    contents: string;           // Base64 PDF content\n  };\n  width: number;                // Page width\n  height: number;               // Page height\n  title?: string;\n  description?: string;\n}\n</code></pre>"},{"location":"dashboard/forms/#36-form","title":"3.6 Form","text":"<pre><code>{\n  id: number;\n  template_id?: number;\n  template?: Template;\n  lead_id: number;\n  lead?: Lead;\n  status: string;\n  signing_status: string;\n  signatories?: Signatory[];\n  pages?: TemplatePages[];\n  pending_lead_signature: boolean;\n  pending_staff_signature: boolean;\n  completed_at?: number;\n  due_date?: number;\n}\n</code></pre>"},{"location":"dashboard/forms/#37-signatory","title":"3.7 Signatory","text":"<pre><code>{\n  id: number;\n  form_id: number;\n  signable_type: 'Staff' | 'Lead';\n  signable_id: number;\n  signable?: Staff | Lead;\n  signature_status: string;\n  signature_status_updated_at: Date;\n  custom_fields?: CustomField[];\n}\n</code></pre>"},{"location":"dashboard/forms/#4-luu-y-ky-thuat","title":"4. L\u01b0u \u00fd k\u1ef9 thu\u1eadt","text":""},{"location":"dashboard/forms/#41-pdf-processing","title":"4.1 PDF Processing","text":"<ul> <li>Upload PDF \u2192 Convert to base64</li> <li>Store in <code>file.contents</code> field</li> <li>Each page stored separately</li> <li>Support multi-page PDFs</li> </ul>"},{"location":"dashboard/forms/#42-custom-fields-overlay","title":"4.2 Custom Fields Overlay","text":"<ul> <li>Fields positioned v\u1edbi absolute coordinates (x, y)</li> <li>Coordinates relative to PDF page dimensions</li> <li>Fields rendered on top of PDF</li> <li>Support drag-drop repositioning</li> </ul>"},{"location":"dashboard/forms/#43-auto-fill-fields","title":"4.3 Auto-fill Fields","text":"<ul> <li>Special field types auto-fill from lead data:</li> <li><code>firstname</code>, <code>lastname</code> \u2192 lead.first_name, lead.last_name</li> <li><code>emailaddress</code> \u2192 lead.email</li> <li><code>phonenumber</code> \u2192 lead.phone</li> <li><code>dateofbirth</code> \u2192 lead.date_of_birth</li> <li><code>address</code> \u2192 lead.address</li> </ul>"},{"location":"dashboard/forms/#44-signature-flow","title":"4.4 Signature Flow","text":"<pre><code>1. Create form from template\n2. Assign signatories (lead + staff n\u1ebfu c\u1ea7n)\n3. Send to lead (email/SMS/portal)\n4. Lead fills fields \u2192 saves as draft\n5. Lead completes all required fields\n6. Lead signs \u2192 signature_status = 'signed'\n7. If require staff signature:\n   - Notify staff\n   - Staff reviews form\n   - Staff signs\n8. All signatories signed \u2192 form completed\n9. Generate final signed PDF\n</code></pre>"},{"location":"dashboard/forms/#45-public-forms","title":"4.5 Public Forms","text":"<ul> <li>Route: <code>/:projectId/template/:id</code></li> <li>No authentication required (n\u1ebfu <code>require_authentication: false</code>)</li> <li>Visitor ID tracking</li> <li>Submit directly to template</li> </ul>"},{"location":"dashboard/forms/#46-client-portal-forms","title":"4.6 Client Portal Forms","text":"<ul> <li>Route: <code>/client/portal/:uuidProject/forms/:id</code></li> <li>Require lead login</li> <li>Auto-fill lead information</li> <li>Save progress</li> </ul>"},{"location":"dashboard/forms/#5-component-structure","title":"5. Component Structure","text":"<pre><code>pages/apps/forms.tsx\n\u2514\u2500\u2500 containers/apps/forms/\n    \u251c\u2500\u2500 wrapper/\n    \u251c\u2500\u2500 sidebar/              # Templates list\n    \u251c\u2500\u2500 main/                 # Template editor / Form viewer\n    \u2514\u2500\u2500 form-nav/             # Navigation (pages, fields)\n</code></pre>"},{"location":"dashboard/forms/#6-template-types","title":"6. Template Types","text":""},{"location":"dashboard/forms/#61-form-templates","title":"6.1 Form Templates","text":"<ul> <li>Intake forms</li> <li>Consent forms</li> <li>HIPAA authorization</li> <li>Patient registration</li> <li>Medical history</li> </ul>"},{"location":"dashboard/forms/#62-document-templates","title":"6.2 Document Templates","text":"<ul> <li>Contracts</li> <li>Agreements</li> <li>Policies</li> </ul>"},{"location":"dashboard/forms/#63-communication-templates","title":"6.3 Communication Templates","text":"<ul> <li>Email templates</li> <li>SMS templates</li> <li>Quick reply templates</li> <li>Note templates</li> </ul>"},{"location":"dashboard/forms/#7-permissions","title":"7. Permissions","text":"<ul> <li>All roles: C\u00f3 th\u1ec3 view forms v\u00e0 fill forms</li> <li>Staff: View forms assigned, sign forms</li> <li>Admin/Owner: Full access, create/edit/delete templates</li> </ul>"},{"location":"dashboard/messages/","title":"Messages Screen - Qu\u1ea3n l\u00fd tin nh\u1eafn t\u1eadp trung","text":""},{"location":"dashboard/messages/#1-gioi-thieu","title":"1. Gi\u1edbi thi\u1ec7u","text":"<p>M\u00e0n h\u00ecnh Messages l\u00e0 inbox t\u1eadp trung cho t\u1ea5t c\u1ea3 tin nh\u1eafn t\u1eeb c\u00e1c k\u00eanh (SMS, Email, Facebook, Instagram, Chat Widget...).</p> <p>Routes: - <code>/messages</code> - Danh s\u00e1ch t\u1ea5t c\u1ea3 conversations - <code>/messages/:id</code> - Chi ti\u1ebft conversation c\u1ee5 th\u1ec3</p> <p>Scope: Xem, g\u1eedi, tr\u1ea3 l\u1eddi tin nh\u1eafn qua nhi\u1ec1u k\u00eanh, qu\u1ea3n l\u00fd conversations.</p>"},{"location":"dashboard/messages/#2-yeu-cau-chuc-nang","title":"2. Y\u00eau c\u1ea7u ch\u1ee9c n\u0103ng","text":""},{"location":"dashboard/messages/#21-hien-thi-messages","title":"2.1 Hi\u1ec3n th\u1ecb Messages","text":"<ul> <li>Danh s\u00e1ch conversations theo lead</li> <li>Group theo k\u00eanh:</li> <li>SMS</li> <li>Email (v\u1edbi threading)</li> <li>Facebook Messenger</li> <li>Instagram DM</li> <li>Chat Widget</li> <li>WhatsApp (n\u1ebfu c\u00f3)</li> <li>Filter theo:</li> <li>Type: <code>sms</code>, <code>email</code>, <code>facebook</code>, <code>instagram</code>, <code>chat</code></li> <li>Read/Unread</li> <li>Has attachments</li> <li>Search theo keyword</li> <li>Pagination</li> </ul>"},{"location":"dashboard/messages/#22-chi-tiet-conversation","title":"2.2 Chi ti\u1ebft Conversation","text":"<ul> <li>Thread messages theo th\u1eddi gian</li> <li>Hi\u1ec3n th\u1ecb:</li> <li>Message content (text/html)</li> <li>Attachments (images, files, videos)</li> <li>Sender info (lead/staff)</li> <li>Timestamp</li> <li>Read status</li> <li>Delivery status (sent/delivered/failed)</li> <li>Email threading (group emails theo subject/thread_id)</li> <li>Real-time updates qua WebSocket</li> </ul>"},{"location":"dashboard/messages/#23-gui-tin-nhan","title":"2.3 G\u1eedi Tin nh\u1eafn","text":"<ul> <li>SMS:</li> <li>G\u1eedi text message</li> <li>Attach images/files</li> <li>Character count (160 chars/segment)</li> <li>Email:</li> <li>Rich text editor (HTML)</li> <li>Subject line</li> <li>CC/BCC</li> <li>Attachments</li> <li>Reply/Forward</li> <li>Email threading</li> <li>Social (FB/IG):</li> <li>Text message</li> <li>Images/GIFs</li> <li>Quick replies</li> <li>Chat Widget:</li> <li>Text message</li> <li>Attachments</li> <li>Typing indicator</li> </ul>"},{"location":"dashboard/messages/#24-advanced-features","title":"2.4 Advanced Features","text":"<ul> <li>AI Reply: Generate reply b\u1eb1ng AI (<code>by_ai: true</code>)</li> <li>Templates: Use message templates</li> <li>Mentions: @mention staff trong internal notes</li> <li>Attachments: Upload files (images, documents, videos)</li> <li>Threading: Email threading theo <code>thread_id</code></li> </ul>"},{"location":"dashboard/messages/#3-api-endpoints","title":"3. API Endpoints","text":"Method Endpoint M\u1ee5c \u0111\u00edch Params Response GET <code>/api/messages</code> L\u1ea5y danh s\u00e1ch messages <code>lead_id?</code>, <code>type?</code>, <code>has?</code>, <code>with?</code>, <code>limit?</code>, <code>page?</code>, <code>in[messageable_type]?</code> <code>CommonPagination&lt;Message&gt;</code> GET <code>/api/messages/:id</code> L\u1ea5y chi ti\u1ebft message <code>id</code> <code>Message</code> POST <code>/api/messages</code> G\u1eedi message m\u1edbi <code>SendMessageParams</code> <code>Message</code> DELETE <code>/api/messages/:id</code> X\u00f3a message <code>id</code> <code>Message</code> POST <code>/api/send-link-message</code> G\u1eedi link download mobile app <code>to_number</code> <code>unknown</code>"},{"location":"dashboard/messages/#31-sendmessageparams","title":"3.1 SendMessageParams","text":"<pre><code>{\n  message: string | null;         // Message content\n  channel_id: number;             // Channel ID (required)\n  to: \n    | { fb_id?: string; insta_id?: string }  // For social\n    | { lead_id?: number; email?: string; phone?: string }[];  // For SMS/Email\n\n  // Email specific\n  email_message?: {\n    html: string | null;          // HTML content\n    subject: string;              // Email subject\n    cc?: { lead_id?: number; email?: string }[];\n    bcc?: { lead_id?: number; email?: string }[];\n    thread_id?: number;           // For threading\n  };\n\n  // SMS specific\n  sms_message?: {\n    to: { lead_id?: number; phone?: string }[];\n  };\n\n  reply_to?: number;              // Reply to message ID\n  attachments?: number[];         // File IDs\n  by_ai?: boolean;                // AI generated reply\n}\n</code></pre>"},{"location":"dashboard/messages/#32-getmessagesparams","title":"3.2 GetMessagesParams","text":"<pre><code>{\n  lead_id?: number;               // Filter by lead\n  type?: string;                  // 'sms' | 'email' | 'facebook' | 'instagram'\n  has?: string;                   // 'attachments' | 'unread'\n  with?: string;                  // Include relations\n  limit?: number;\n  page?: number;\n  \"in[messageable_type]\"?: string; // Filter by messageable type\n}\n</code></pre>"},{"location":"dashboard/messages/#4-websocket-events","title":"4. WebSocket Events","text":"Event Type Trigger Action <code>NEW_MESSAGE</code> Tin nh\u1eafn m\u1edbi Invalidate <code>['messages', leadId]</code>, show notification, update unread count <code>MESSAGE_UPDATED</code> Tin nh\u1eafn \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt Invalidate <code>['messages', leadId]</code>, refresh UI <code>MESSAGE_DELETED</code> Tin nh\u1eafn b\u1ecb x\u00f3a Invalidate <code>['messages', leadId]</code>, remove from UI <code>TYPING</code> Lead \u0111ang typing Show typing indicator"},{"location":"dashboard/messages/#5-redux-state","title":"5. Redux State","text":""},{"location":"dashboard/messages/#51-message-state","title":"5.1 Message State","text":"<ul> <li><code>lead.message.showMessageModal</code> - Show/hide compose modal</li> <li><code>lead.message.isGlobalPopup</code> - Global compose popup</li> <li><code>lead.message.isOpenEmailFormGlobal</code> - Email form state</li> <li><code>lead.message.isOpenSmsFormGlobal</code> - SMS form state</li> </ul>"},{"location":"dashboard/messages/#52-actions","title":"5.2 Actions","text":"<ul> <li><code>doSetShowMessageModal()</code> - Toggle message modal</li> <li><code>doSetOpenEmailForm()</code> - Open email form</li> <li><code>doSetOpenSmsForm()</code> - Open SMS form</li> <li><code>doSetGlobalPopUp()</code> - Toggle global popup</li> </ul>"},{"location":"dashboard/messages/#6-luu-y-ky-thuat","title":"6. L\u01b0u \u00fd k\u1ef9 thu\u1eadt","text":""},{"location":"dashboard/messages/#61-email-threading","title":"6.1 Email Threading","text":"<ul> <li>Group emails theo <code>thread_id</code></li> <li>Display nh\u01b0 conversation thread</li> <li>Reply s\u1ebd c\u00f3 c\u00f9ng <code>thread_id</code></li> <li>Subject line format: <code>Re: Original Subject</code></li> </ul>"},{"location":"dashboard/messages/#62-sms-character-count","title":"6.2 SMS Character Count","text":"<ul> <li>160 characters = 1 segment</li> <li>Special characters count as 2</li> <li>Show character count v\u00e0 segment count</li> <li>Warning khi &gt; 3 segments</li> </ul>"},{"location":"dashboard/messages/#63-attachments","title":"6.3 Attachments","text":"<ul> <li>Upload files tr\u01b0\u1edbc khi send message</li> <li>Get file IDs t\u1eeb upload response</li> <li>Pass file IDs trong <code>attachments</code> array</li> <li>Support: images, documents, videos</li> </ul>"},{"location":"dashboard/messages/#64-ai-reply","title":"6.4 AI Reply","text":"<ul> <li>Set <code>by_ai: true</code> trong params</li> <li>Backend generate reply d\u1ef1a tr\u00ean conversation context</li> <li>Show \"AI Generated\" badge</li> <li>Allow edit tr\u01b0\u1edbc khi send</li> </ul>"},{"location":"dashboard/messages/#65-real-time-updates","title":"6.5 Real-time Updates","text":"<ul> <li>WebSocket connection cho real-time messages</li> <li>Typing indicator</li> <li>Read receipts</li> <li>Delivery status updates</li> </ul>"},{"location":"dashboard/messages/#66-channel-detection","title":"6.6 Channel Detection","text":"<ul> <li>Auto-detect channel t\u1eeb <code>channel_id</code></li> <li>Different UI cho m\u1ed7i channel type</li> <li>Email: Rich text editor</li> <li>SMS: Plain text v\u1edbi character count</li> <li>Social: Quick replies, GIFs</li> </ul>"},{"location":"dashboard/messages/#7-component-structure","title":"7. Component Structure","text":"<pre><code>pages/apps/messages.tsx\n\u2514\u2500\u2500 containers/apps/ticket/\n    \u251c\u2500\u2500 wrapper/\n    \u251c\u2500\u2500 sidebar/              # Conversation list\n    \u251c\u2500\u2500 message/\n    \u2502   \u251c\u2500\u2500 index.tsx         # Message group/filter\n    \u2502   \u2514\u2500\u2500 main-message/     # Message thread\n    \u2514\u2500\u2500 chat-form/            # Compose message form\n</code></pre>"},{"location":"dashboard/messages/#8-message-types","title":"8. Message Types","text":""},{"location":"dashboard/messages/#81-sms","title":"8.1 SMS","text":"<ul> <li>Plain text</li> <li>Max 1600 characters (10 segments)</li> <li>Attachments: images only</li> <li>No formatting</li> </ul>"},{"location":"dashboard/messages/#82-email","title":"8.2 Email","text":"<ul> <li>HTML content</li> <li>Rich text editor</li> <li>Subject, CC, BCC</li> <li>Attachments: any file type</li> <li>Threading support</li> </ul>"},{"location":"dashboard/messages/#83-facebookinstagram","title":"8.3 Facebook/Instagram","text":"<ul> <li>Text message</li> <li>Images, GIFs</li> <li>Quick replies</li> <li>Reactions (n\u1ebfu support)</li> </ul>"},{"location":"dashboard/messages/#84-chat-widget","title":"8.4 Chat Widget","text":"<ul> <li>Text message</li> <li>Attachments</li> <li>Typing indicator</li> <li>Read receipts</li> </ul>"},{"location":"dashboard/messages/#9-permissions","title":"9. Permissions","text":"<ul> <li>All roles: C\u00f3 th\u1ec3 g\u1eedi/nh\u1eadn messages</li> <li>Staff: Ch\u1ec9 xem messages c\u1ee7a leads \u0111\u01b0\u1ee3c assign</li> <li>Admin/Owner: Xem t\u1ea5t c\u1ea3 messages</li> </ul>"},{"location":"dashboard/other-modules/","title":"Tasks, Reports, Marketing &amp; Other Modules","text":""},{"location":"dashboard/other-modules/#1-tasks-module","title":"1. Tasks Module","text":""},{"location":"dashboard/other-modules/#11-gioi-thieu","title":"1.1 Gi\u1edbi thi\u1ec7u","text":"<p>Qu\u1ea3n l\u00fd tasks/to-dos cho team.</p> <p>Routes: - <code>/tasks</code> - Danh s\u00e1ch tasks - <code>/tasks/:id</code> - Chi ti\u1ebft task</p>"},{"location":"dashboard/other-modules/#12-yeu-cau-chuc-nang","title":"1.2 Y\u00eau c\u1ea7u ch\u1ee9c n\u0103ng","text":"<ul> <li>CRUD Tasks:</li> <li>Create task</li> <li>Update task</li> <li>Delete task (single/bulk)</li> <li>Mark as complete</li> <li>Task Properties:</li> <li>Title (<code>name</code>)</li> <li>Description</li> <li>Assigned to (<code>staff_id</code>)</li> <li>Related to lead (<code>lead_id</code>)</li> <li>Due date (<code>reminder_date</code> - unix timestamp)</li> <li>Has reminder (<code>has_reminder: boolean</code>)</li> <li>Status: <code>open</code>, <code>complete</code>, <code>delete</code></li> <li>Is past due (calculated field)</li> <li>Filters:</li> <li>Status filter</li> <li>Staff filter</li> <li>Lead filter</li> <li>Date range filter</li> <li>Has reminder</li> <li>Is past due</li> <li>Soonest reminder</li> </ul>"},{"location":"dashboard/other-modules/#13-api-endpoints","title":"1.3 API Endpoints","text":"Method Endpoint M\u1ee5c \u0111\u00edch Params GET <code>/api/tasks</code> L\u1ea5y danh s\u00e1ch tasks <code>page?</code>, <code>limit?</code>, <code>staff_id?</code>, <code>status?</code>, <code>lead_id?</code>, <code>created_from?</code>, <code>created_to?</code>, <code>has_reminder?</code>, <code>is_past_due?</code>, <code>is_soonest_reminder?</code> POST <code>/api/tasks</code> T\u1ea1o task <code>CreateTaskRequestParams</code> PUT <code>/api/tasks/:id</code> C\u1eadp nh\u1eadt task <code>id</code>, <code>UpdateTaskForm</code> DELETE <code>/api/tasks/:id</code> X\u00f3a task <code>id</code> PUT <code>/api/tasks/bulk</code> Bulk update <code>ids[]</code>, <code>status: 'complete' \\| 'delete'</code> DELETE <code>/api/tasks/bulk</code> Bulk delete <code>ids[]</code> GET <code>/api/tasks/status/count</code> L\u1ea5y task counts Same filters as GET /api/tasks"},{"location":"dashboard/other-modules/#14-task-status-taskstatus","title":"1.4 Task Status (TaskStatus)","text":"<pre><code>type TaskStatus = \"open\" | \"complete\" | \"delete\" | string;\n</code></pre>"},{"location":"dashboard/other-modules/#15-task-counts","title":"1.5 Task Counts","text":"<pre><code>interface CountOfTask {\n  open: number;\n  complete: number;\n  overdue: number;\n}\n</code></pre>"},{"location":"dashboard/other-modules/#16-createtaskrequestparams","title":"1.6 CreateTaskRequestParams","text":"<pre><code>{\n  name?: string;\n  status?: TaskStatus;\n  has_reminder?: boolean;\n  lead_id?: number;\n  staff_id?: number;\n  description?: string;\n  reminder_date?: number;      // Unix timestamp\n}\n</code></pre>"},{"location":"dashboard/other-modules/#17-component-structure","title":"1.7 Component Structure","text":"<pre><code>pages/apps/tasks.tsx\n\u2514\u2500\u2500 containers/apps/ticket/task/\n    \u251c\u2500\u2500 main/                 # Tasks list\n    \u2514\u2500\u2500 (shared with ticket module)\n</code></pre> <p>L\u01b0u \u00fd: Tasks s\u1eed d\u1ee5ng chung components v\u1edbi Ticket module.</p>"},{"location":"dashboard/other-modules/#2-reports-module","title":"2. Reports Module","text":""},{"location":"dashboard/other-modules/#21-gioi-thieu","title":"2.1 Gi\u1edbi thi\u1ec7u","text":"<p>Analytics v\u00e0 reporting dashboard.</p> <p></p> <p>Route: <code>/reports</code></p>"},{"location":"dashboard/other-modules/#22-yeu-cau-chuc-nang","title":"2.2 Y\u00eau c\u1ea7u ch\u1ee9c n\u0103ng","text":"<ul> <li>Dashboard Overview:</li> <li>Key metrics (tickets, leads, revenue)</li> <li>Charts (line, bar, pie)</li> <li>Date range filter</li> <li>Report Types:</li> <li>Tickets Report:<ul> <li>Total tickets</li> <li>Tickets by status</li> <li>Tickets by type</li> <li>Response time</li> <li>Resolution time</li> </ul> </li> <li>Leads Report:<ul> <li>New leads</li> <li>Lead sources</li> <li>Conversion rate</li> </ul> </li> <li>Revenue Report:<ul> <li>Total revenue</li> <li>Revenue by service</li> <li>Revenue by location</li> </ul> </li> <li>Communication Report:<ul> <li>SMS sent/received</li> <li>Emails sent/received</li> <li>Calls made/received</li> <li>Average call duration</li> </ul> </li> <li>Staff Performance:<ul> <li>Tickets handled</li> <li>Average response time</li> <li>Customer satisfaction</li> </ul> </li> </ul>"},{"location":"dashboard/other-modules/#23-api-endpoints","title":"2.3 API Endpoints","text":"Method Endpoint M\u1ee5c \u0111\u00edch GET <code>/api/reports/tickets</code> Tickets analytics GET <code>/api/reports/leads</code> Leads analytics GET <code>/api/reports/revenue</code> Revenue analytics GET <code>/api/reports/communication</code> Communication analytics GET <code>/api/reports/staff</code> Staff performance"},{"location":"dashboard/other-modules/#24-export-reports","title":"2.4 Export Reports","text":"<ul> <li>Export to CSV</li> <li>Export to PDF</li> <li>Schedule email reports (daily/weekly/monthly)</li> </ul>"},{"location":"dashboard/other-modules/#3-marketing-module","title":"3. Marketing Module","text":""},{"location":"dashboard/other-modules/#31-gioi-thieu","title":"3.1 Gi\u1edbi thi\u1ec7u","text":"<p>Marketing campaigns v\u00e0 email/SMS broadcasts.</p> <p>Route: <code>/marketing</code></p>"},{"location":"dashboard/other-modules/#32-yeu-cau-chuc-nang","title":"3.2 Y\u00eau c\u1ea7u ch\u1ee9c n\u0103ng","text":"<ul> <li>Campaigns:</li> <li>Create campaign</li> <li>Email broadcast</li> <li>SMS broadcast</li> <li>Target audience (segments)</li> <li>Email Builder:</li> <li>Drag-drop email builder</li> <li>Templates</li> <li>Personalization (merge tags)</li> <li>Preview</li> <li>SMS Campaigns:</li> <li>Bulk SMS</li> <li>Character count</li> <li>Opt-out handling</li> <li>Campaign Analytics:</li> <li>Sent count</li> <li>Open rate (email)</li> <li>Click rate</li> <li>Unsubscribe rate</li> <li>Conversion tracking</li> </ul>"},{"location":"dashboard/other-modules/#33-api-endpoints","title":"3.3 API Endpoints","text":"Method Endpoint M\u1ee5c \u0111\u00edch GET <code>/api/campaigns</code> L\u1ea5y campaigns POST <code>/api/campaigns</code> T\u1ea1o campaign POST <code>/api/campaigns/:id/send</code> Send campaign GET <code>/api/campaigns/:id/analytics</code> Campaign analytics"},{"location":"dashboard/other-modules/#4-dialer-module","title":"4. Dialer Module","text":""},{"location":"dashboard/other-modules/#41-gioi-thieu","title":"4.1 Gi\u1edbi thi\u1ec7u","text":"<p>Power dialer cho outbound calling.</p> <p>Route: <code>/dialer</code></p>"},{"location":"dashboard/other-modules/#42-yeu-cau-chuc-nang","title":"4.2 Y\u00eau c\u1ea7u ch\u1ee9c n\u0103ng","text":"<ul> <li>Dialer Interface:</li> <li>Keypad</li> <li>Call queue</li> <li>Auto-dial next number</li> <li>Call scripts</li> <li>Call Queue:</li> <li>Load leads to call</li> <li>Skip/Next</li> <li>Mark outcome (answered/voicemail/busy/no-answer)</li> <li>Call Recording:</li> <li>Record calls</li> <li>Play recordings</li> <li>Download recordings</li> </ul>"},{"location":"dashboard/other-modules/#5-mentions-module","title":"5. Mentions Module","text":""},{"location":"dashboard/other-modules/#51-gioi-thieu","title":"5.1 Gi\u1edbi thi\u1ec7u","text":"<p>Qu\u1ea3n l\u00fd @mentions trong tickets/messages.</p> <p>Route: <code>/mentions</code></p>"},{"location":"dashboard/other-modules/#52-yeu-cau-chuc-nang","title":"5.2 Y\u00eau c\u1ea7u ch\u1ee9c n\u0103ng","text":"<ul> <li>Mentions List:</li> <li>All mentions c\u1ee7a user</li> <li>Unread mentions</li> <li>Mark as read</li> <li>Mention Notification:</li> <li>Real-time notification khi \u0111\u01b0\u1ee3c mention</li> <li>Email notification</li> <li>Badge count</li> </ul>"},{"location":"dashboard/other-modules/#6-client-portal-module","title":"6. Client Portal Module","text":""},{"location":"dashboard/other-modules/#61-gioi-thieu","title":"6.1 Gi\u1edbi thi\u1ec7u","text":"<p>Portal cho clients \u0111\u1ec3 view/manage th\u00f4ng tin c\u1ee7a h\u1ecd.</p> <p>Routes: - <code>/client-portal</code> - Portal dashboard (internal) - <code>/client/portal/:uuidProject</code> - Client portal (public)</p>"},{"location":"dashboard/other-modules/#62-yeu-cau-chuc-nang","title":"6.2 Y\u00eau c\u1ea7u ch\u1ee9c n\u0103ng","text":"<ul> <li>Client Login:</li> <li>Email/password login</li> <li>Magic link login</li> <li>Portal Features:</li> <li>View appointments</li> <li>View invoices</li> <li>Pay invoices</li> <li>Fill forms</li> <li>Upload files</li> <li>View messages</li> <li>Request appointment</li> </ul>"},{"location":"dashboard/other-modules/#7-telehealth-meeting-modules","title":"7. Telehealth &amp; Meeting Modules","text":""},{"location":"dashboard/other-modules/#71-telehealth","title":"7.1 Telehealth","text":"<p>Route: <code>/telehealth/:textId</code></p> <ul> <li>Video call v\u1edbi lead (Daily.co integration)</li> <li>Screen share</li> <li>Chat</li> <li>Recording</li> </ul>"},{"location":"dashboard/other-modules/#72-meeting","title":"7.2 Meeting","text":"<p>Route: <code>/meeting/:textId</code></p> <ul> <li>Internal staff meetings</li> <li>Video conference</li> <li>Screen share</li> <li>Recording</li> </ul>"},{"location":"dashboard/other-modules/#8-file-request-upload-module","title":"8. File Request Upload Module","text":""},{"location":"dashboard/other-modules/#81-gioi-thieu","title":"8.1 Gi\u1edbi thi\u1ec7u","text":"<p>Public file upload page cho leads.</p> <p>Route: <code>/file-request-upload/:accessToken</code></p>"},{"location":"dashboard/other-modules/#82-yeu-cau-chuc-nang","title":"8.2 Y\u00eau c\u1ea7u ch\u1ee9c n\u0103ng","text":"<ul> <li>File Upload:</li> <li>Drag-drop upload</li> <li>Multiple files</li> <li>Progress bar</li> <li>Access Control:</li> <li>Token-based access</li> <li>Expiration time</li> <li>One-time use (optional)</li> </ul>"},{"location":"dashboard/other-modules/#9-authentication-onboarding-modules","title":"9. Authentication &amp; Onboarding Modules","text":""},{"location":"dashboard/other-modules/#91-routes","title":"9.1 Routes","text":"<ul> <li><code>/login</code> - Sign in</li> <li><code>/signup</code> - Sign up (commented out, kh\u00f4ng c\u00f3 route)</li> <li><code>/invite/:token</code> - Invitation sign up</li> <li><code>/verify-account</code> - Email verification</li> <li><code>/forgot-password</code> - Forgot password</li> <li><code>/reset-password/:token</code> - Reset password</li> <li><code>/reset-password-onboarding</code> - Reset password sau onboarding</li> <li><code>/onboarding/:uuid?</code> - Client onboarding</li> <li><code>/onboarding/admin/:uuid</code> - Admin onboarding</li> </ul>"},{"location":"dashboard/other-modules/#92-onboarding-flow","title":"9.2 Onboarding Flow","text":"<ul> <li>Client Onboarding:</li> <li>Business info</li> <li>Location setup</li> <li>Phone number selection</li> <li>Email connection (Gmail/Outlook)</li> <li>Provider selection</li> <li>Admin Onboarding:</li> <li>Admin-specific setup</li> <li>Team setup</li> <li>Initial configuration</li> </ul>"},{"location":"dashboard/other-modules/#10-error-pages","title":"10. Error Pages","text":""},{"location":"dashboard/other-modules/#101-routes","title":"10.1 Routes","text":"<ul> <li><code>/error-500</code> - Internal Server Error</li> <li><code>/error-503</code> - Service Unavailable</li> <li><code>/error-505</code> - HTTP Version Not Supported</li> <li><code>*</code> (404) - Not Found</li> </ul>"},{"location":"dashboard/other-modules/#11-other-routes","title":"11. Other Routes","text":""},{"location":"dashboard/other-modules/#111-introduce","title":"11.1 Introduce","text":"<p>Route: <code>/introduce</code></p> <ul> <li>Landing page cho mobile users</li> <li>Redirect to mobile app ho\u1eb7c show message</li> </ul>"},{"location":"dashboard/other-modules/#112-rate-us","title":"11.2 Rate Us","text":"<p>Route: <code>/rate-us</code></p> <ul> <li>Review/rating modal</li> <li>Collect feedback</li> </ul>"},{"location":"dashboard/other-modules/#113-callbacks","title":"11.3 Callbacks","text":"<p>Route: <code>/callbacks/:provider</code></p> <ul> <li>OAuth callbacks (Google, Outlook, Facebook, etc.)</li> <li>Integration callbacks (Jira, Slack, Zapier)</li> </ul>"},{"location":"dashboard/other-modules/#tasks","title":"Tasks","text":"<ul> <li>Test create/edit/delete task</li> <li>Test assign task</li> <li>Test mark as complete</li> <li>Test filters (my tasks, overdue, etc.)</li> </ul>"},{"location":"dashboard/other-modules/#reports","title":"Reports","text":"<ul> <li>Test date range filters</li> <li>Test export CSV/PDF</li> <li>Test chart rendering</li> <li>Test data accuracy</li> </ul>"},{"location":"dashboard/other-modules/#marketing","title":"Marketing","text":"<ul> <li>Test email builder</li> <li>Test SMS broadcast</li> <li>Test campaign analytics</li> <li>Test opt-out handling</li> </ul>"},{"location":"dashboard/other-modules/#dialer","title":"Dialer","text":"<ul> <li>Test call queue</li> <li>Test auto-dial</li> <li>Test call recording</li> </ul>"},{"location":"dashboard/other-modules/#client-portal","title":"Client Portal","text":"<ul> <li>Test client login</li> <li>Test portal features</li> <li>Test file upload</li> <li>Test invoice payment</li> </ul>"},{"location":"dashboard/payment-billing/","title":"Payment &amp; Billing Module","text":""},{"location":"dashboard/payment-billing/#1-gioi-thieu","title":"1. Gi\u1edbi thi\u1ec7u","text":"<p>Module Payment qu\u1ea3n l\u00fd thanh to\u00e1n, invoices, payment methods cho c\u1ea3 internal billing v\u00e0 client payments.</p> <p>Routes: - <code>/billing</code> - Billing dashboard (subscription billing) - <code>/billing/invoice/:invoiceId</code> - Chi ti\u1ebft invoice - <code>/invoice/view/:id</code> - Public invoice view (kh\u00f4ng c\u1ea7n login)</p> <p>Scope: Xem invoices, payment history, payment methods, process payments, send invoices.</p>"},{"location":"dashboard/payment-billing/#2-yeu-cau-chuc-nang","title":"2. Y\u00eau c\u1ea7u ch\u1ee9c n\u0103ng","text":""},{"location":"dashboard/payment-billing/#21-billing-dashboard","title":"2.1 Billing Dashboard","text":"<ul> <li>Subscription Billing:</li> <li>Current plan info</li> <li>Next billing date</li> <li>Payment method</li> <li>Billing history</li> <li>Usage Metrics:</li> <li>Contacts count</li> <li>SMS usage</li> <li>Storage usage</li> <li>Additional features</li> </ul>"},{"location":"dashboard/payment-billing/#22-invoices-management","title":"2.2 Invoices Management","text":"<ul> <li>Invoice List:</li> <li>All invoices (paid/unpaid/overdue)</li> <li>Filter by: status, date range</li> <li>Search by invoice number</li> <li>Invoice Details:</li> <li>Invoice number</li> <li>Date, due date</li> <li>Line items</li> <li>Subtotal, tax, total</li> <li>Payment status</li> <li>Download PDF</li> <li>Create Invoice:</li> <li>Add line items</li> <li>Set due date</li> <li>Add notes</li> <li>Send to client</li> </ul>"},{"location":"dashboard/payment-billing/#23-payment-methods","title":"2.3 Payment Methods","text":"<ul> <li>Manage Payment Methods:</li> <li>Add credit card (Stripe)</li> <li>Set default payment method</li> <li>Delete payment method</li> <li>Payment Processing:</li> <li>Process payment for invoice</li> <li>Refund payment</li> <li>Payment receipts</li> </ul>"},{"location":"dashboard/payment-billing/#24-client-payments","title":"2.4 Client Payments","text":"<ul> <li>Send Invoice to Client:</li> <li>Email invoice link</li> <li>SMS invoice link</li> <li>Public payment page</li> <li>Payment Page:</li> <li>View invoice details</li> <li>Enter payment info</li> <li>Process payment (Stripe)</li> <li>Payment confirmation</li> </ul>"},{"location":"dashboard/payment-billing/#3-api-endpoints","title":"3. API Endpoints","text":"Method Endpoint M\u1ee5c \u0111\u00edch Params Response GET <code>/api/invoices</code> L\u1ea5y danh s\u00e1ch invoices <code>page?</code>, <code>limit?</code>, <code>status?</code>, <code>date_from?</code>, <code>date_to?</code> <code>CommonPagination&lt;Invoice&gt;</code> GET <code>/api/invoices/:id</code> Chi ti\u1ebft invoice <code>id</code> <code>Invoice</code> POST <code>/api/invoices</code> T\u1ea1o invoice <code>InvoiceData</code> <code>Invoice</code> PUT <code>/api/invoices/:id</code> C\u1eadp nh\u1eadt invoice <code>id</code>, <code>InvoiceData</code> <code>Invoice</code> DELETE <code>/api/invoices/:id</code> X\u00f3a invoice <code>id</code> <code>Invoice</code> POST <code>/api/invoices/:id/send</code> G\u1eedi invoice cho client <code>id</code>, <code>method</code>, <code>to</code> <code>unknown</code> POST <code>/api/invoices/:id/pay</code> Process payment <code>id</code>, <code>payment_method_id</code> <code>Payment</code> POST <code>/api/payments/:id/refund</code> Refund payment <code>id</code>, <code>amount?</code> <code>Payment</code> GET <code>/api/payment-methods</code> L\u1ea5y payment methods - <code>PaymentMethod[]</code> POST <code>/api/payment-methods</code> Add payment method <code>stripe_token</code> <code>PaymentMethod</code> DELETE <code>/api/payment-methods/:id</code> Delete payment method <code>id</code> <code>PaymentMethod</code> PUT <code>/api/payment-methods/:id/default</code> Set default <code>id</code> <code>PaymentMethod</code>"},{"location":"dashboard/payment-billing/#31-invoicedata","title":"3.1 InvoiceData","text":"<pre><code>{\n  lead_id: number;\n  invoice_number?: string;        // Auto-generated n\u1ebfu kh\u00f4ng c\u00f3\n  date: Date;\n  due_date: Date;\n  status: 'draft' | 'sent' | 'paid' | 'overdue' | 'cancelled';\n  line_items: InvoiceLineItem[];\n  notes?: string;\n  tax_rate?: number;              // Percentage (e.g., 8.5)\n  discount?: number;              // Amount or percentage\n}\n</code></pre>"},{"location":"dashboard/payment-billing/#32-invoicelineitem","title":"3.2 InvoiceLineItem","text":"<pre><code>{\n  description: string;\n  quantity: number;\n  unit_price: number;\n  amount: number;                 // quantity * unit_price\n  procedure_id?: number;          // Link to service/procedure\n}\n</code></pre>"},{"location":"dashboard/payment-billing/#33-payment-processing","title":"3.3 Payment Processing","text":"<pre><code>POST /api/invoices/:id/pay\n{\n  payment_method_id: string;      // Stripe payment method ID\n  amount?: number;                // Partial payment (optional)\n}\n</code></pre>"},{"location":"dashboard/payment-billing/#4-luu-y-ky-thuat","title":"4. L\u01b0u \u00fd k\u1ef9 thu\u1eadt","text":""},{"location":"dashboard/payment-billing/#41-stripe-integration","title":"4.1 Stripe Integration","text":"<ul> <li>Use Stripe Elements cho payment form</li> <li>Tokenize card info tr\u01b0\u1edbc khi send to backend</li> <li>Backend create PaymentIntent</li> <li>Handle 3D Secure (SCA)</li> <li>Webhook cho payment status updates</li> </ul>"},{"location":"dashboard/payment-billing/#42-invoice-calculations","title":"4.2 Invoice Calculations","text":"<pre><code>subtotal = sum(line_items.amount)\ntax = subtotal * (tax_rate / 100)\ndiscount_amount = discount (n\u1ebfu l\u00e0 amount) ho\u1eb7c subtotal * (discount / 100)\ntotal = subtotal + tax - discount_amount\n</code></pre>"},{"location":"dashboard/payment-billing/#43-invoice-numbering","title":"4.3 Invoice Numbering","text":"<ul> <li>Auto-generate: <code>INV-{year}-{sequential_number}</code></li> <li>Example: <code>INV-2024-00123</code></li> <li>Unique per project</li> </ul>"},{"location":"dashboard/payment-billing/#44-invoice-status","title":"4.4 Invoice Status","text":"<ul> <li>Invoice <code>status</code> field l\u00e0 string (kh\u00f4ng c\u00f3 enum c\u1ed1 \u0111\u1ecbnh)</li> <li>C\u00f3 th\u1ec3 l\u00e0 custom status do user define</li> <li>Common values: <code>draft</code>, <code>sent</code>, <code>paid</code>, <code>overdue</code>, <code>cancelled</code>, <code>partial</code></li> <li>H\u1ec7 th\u1ed1ng support custom invoice status (user c\u00f3 th\u1ec3 t\u1ea1o status ri\u00eang)</li> </ul> <p>API: - GET <code>/api/invoices?status={status}</code> - Filter by status - Endpoint \u0111\u1ec3 add custom status (c\u1ea7n verify)</p>"},{"location":"dashboard/payment-billing/#45-payment-methods","title":"4.5 Payment Methods","text":"<p>H\u1ec7 th\u1ed1ng support nhi\u1ec1u payment methods: - Card (Stripe): <code>payment_method_id</code> t\u1eeb Stripe - Cash: <code>payByCash</code> API endpoint - Custom methods: <code>custom_method</code> field (e.g., \"Check\", \"Wire Transfer\", \"Zelle\")</p> <p>Payment Flow: <pre><code>1. Create invoice\n2. Add line items (procedures/addons)\n3. Send to lead (email/SMS)\n4. Lead pays via:\n   - Card (Stripe) \u2192 payByCard\n   - Cash \u2192 payByCash\n   - Custom method \u2192 specify custom_method\n5. Payment recorded\n6. Invoice status updated\n7. Send receipt (optional)\n</code></pre></p>"},{"location":"dashboard/payment-billing/#45-public-invoice-view","title":"4.5 Public Invoice View","text":"<ul> <li>Route: <code>/invoice/view/:id</code></li> <li>Kh\u00f4ng c\u1ea7n authentication</li> <li>Verify signature/token trong URL</li> <li>Show invoice details</li> <li>Payment button (n\u1ebfu unpaid)</li> </ul>"},{"location":"dashboard/payment-billing/#46-payment-receipts","title":"4.6 Payment Receipts","text":"<ul> <li>Auto-generate PDF receipt sau khi payment</li> <li>Email receipt cho client</li> <li>Download receipt t\u1eeb invoice detail</li> </ul>"},{"location":"dashboard/payment-billing/#5-component-structure","title":"5. Component Structure","text":"<pre><code>pages/apps/payment.tsx\n\u2514\u2500\u2500 containers/apps/payment/\n    \u251c\u2500\u2500 dashboard/            # Billing dashboard\n    \u251c\u2500\u2500 invoices/\n    \u2502   \u251c\u2500\u2500 list/             # Invoices list\n    \u2502   \u251c\u2500\u2500 detail/           # Invoice detail\n    \u2502   \u2514\u2500\u2500 create/           # Create invoice\n    \u251c\u2500\u2500 payment-methods/      # Payment methods management\n    \u2514\u2500\u2500 invoice-view/         # Public invoice view (no auth)\n\npages/apps/invoice-view.tsx   # Standalone public invoice page\n</code></pre>"},{"location":"dashboard/payment-billing/#6-invoice-templates","title":"6. Invoice Templates","text":""},{"location":"dashboard/payment-billing/#61-invoice-pdf","title":"6.1 Invoice PDF","text":"<ul> <li>Company logo</li> <li>Company info (name, address, phone)</li> <li>Invoice number, date, due date</li> <li>Bill to (client info)</li> <li>Line items table</li> <li>Subtotal, tax, discount, total</li> <li>Payment instructions</li> <li>Notes/Terms</li> </ul>"},{"location":"dashboard/payment-billing/#62-email-template","title":"6.2 Email Template","text":"<ul> <li>Subject: <code>Invoice #{invoice_number} from {company_name}</code></li> <li>Body: Invoice details + payment link</li> <li>Attach PDF invoice</li> </ul>"},{"location":"dashboard/payment-billing/#7-permissions","title":"7. Permissions","text":"<ul> <li>All roles: C\u00f3 th\u1ec3 view invoices</li> <li>Admin/Owner: Create/edit/delete invoices, manage payment methods</li> </ul>"},{"location":"dashboard/payment-billing/#8-subscription-billing","title":"8. Subscription Billing","text":"<ul> <li>Auto-billing: Charge subscription fee monthly/yearly</li> <li>Usage-based: Charge for SMS, storage overages</li> <li>Prorated: Prorate khi upgrade/downgrade mid-cycle</li> <li>Failed Payment: Retry 3 times, then suspend account</li> </ul>"},{"location":"dashboard/settings/","title":"Settings Module - C\u1ea5u h\u00ecnh h\u1ec7 th\u1ed1ng","text":""},{"location":"dashboard/settings/#1-gioi-thieu","title":"1. Gi\u1edbi thi\u1ec7u","text":"<p>Module Settings qu\u1ea3n l\u00fd t\u1ea5t c\u1ea3 c\u1ea5u h\u00ecnh c\u1ee7a project, bao g\u1ed3m account, practice info, services, channels, users, billing, subscriptions...</p> <p>Main Route: <code>/settings</code></p> <p>Nested Routes: (19 sub-routes)</p>"},{"location":"dashboard/settings/#2-nested-routes-structure","title":"2. Nested Routes Structure","text":""},{"location":"dashboard/settings/#21-account-practice","title":"2.1 Account &amp; Practice","text":"Route Component M\u1ee5c \u0111\u00edch <code>/settings/account</code> Account Th\u00f4ng tin t\u00e0i kho\u1ea3n c\u00e1 nh\u00e2n (profile, password, 2FA) <code>/settings/practice</code> Practice Th\u00f4ng tin practice (name, address, logo, timezone, business hours)"},{"location":"dashboard/settings/#22-subscription-billing","title":"2.2 Subscription &amp; Billing","text":"Route Component M\u1ee5c \u0111\u00edch <code>/settings/subscription</code> Subscription Qu\u1ea3n l\u00fd subscription plan, upgrade/downgrade <code>/settings/billing</code> Billing Payment methods, billing history, invoices"},{"location":"dashboard/settings/#23-services-procedures","title":"2.3 Services &amp; Procedures","text":"Route Component M\u1ee5c \u0111\u00edch <code>/settings/services</code> Services Danh s\u00e1ch services/procedures <code>/settings/services/:id</code> ServiceDetails Chi ti\u1ebft service (name, price, duration, category)"},{"location":"dashboard/settings/#24-blogs","title":"2.4 Blogs","text":"Route Component M\u1ee5c \u0111\u00edch <code>/settings/blogs</code> Blogs Qu\u1ea3n l\u00fd blog posts (cho website/marketing) <code>/settings/blogs/:id</code> BlogDetails Chi ti\u1ebft blog post (title, content, SEO)"},{"location":"dashboard/settings/#25-channels","title":"2.5 Channels","text":"Route Component M\u1ee5c \u0111\u00edch <code>/settings/channels</code> Channels Danh s\u00e1ch channels (SMS, Email, Voice, Fax, Social...) <code>/settings/channels/webhook-url/</code> ChannelAppWebhookUrlDetail Webhook URL config <code>/settings/channels/:channelApp/</code> ChannelAppDetail Chi ti\u1ebft channel app (Jira, Slack, Zapier...) <code>/settings/channels/:channelApp/:name</code> ChannelDetail Chi ti\u1ebft channel c\u1ee5 th\u1ec3"},{"location":"dashboard/settings/#26-notification","title":"2.6 Notification","text":"Route Component M\u1ee5c \u0111\u00edch <code>/settings/notification</code> NotificationSetting C\u1ea5u h\u00ecnh notifications (email, SMS, push)"},{"location":"dashboard/settings/#27-admin-users","title":"2.7 Admin &amp; Users","text":"Route Component M\u1ee5c \u0111\u00edch <code>/settings/admin</code> Admin Admin settings (locations, teams, roles) <code>/settings/admin/users</code> Admin (isUsers) User management trong admin <code>/settings/manage-users</code> ManageUsers Qu\u1ea3n l\u00fd staffs (ch\u1ec9 admin/owner) <code>/settings/manage-users/staff/:id</code> StaffDetails Chi ti\u1ebft staff (permissions, schedule, locations)"},{"location":"dashboard/settings/#28-default-route","title":"2.8 Default Route","text":"<ul> <li>N\u1ebfu kh\u00f4ng match route n\u00e0o \u2192 Redirect to <code>/settings/practice</code></li> </ul>"},{"location":"dashboard/settings/#3-api-endpoints-tong-hop","title":"3. API Endpoints (T\u1ed5ng h\u1ee3p)","text":""},{"location":"dashboard/settings/#31-account","title":"3.1 Account","text":"Method Endpoint M\u1ee5c \u0111\u00edch GET <code>/api/user</code> L\u1ea5y th\u00f4ng tin user PUT <code>/api/user</code> C\u1eadp nh\u1eadt user profile PUT <code>/api/user/password</code> \u0110\u1ed5i password POST <code>/api/user/2fa/enable</code> B\u1eadt 2FA POST <code>/api/user/2fa/disable</code> T\u1eaft 2FA"},{"location":"dashboard/settings/#32-practice","title":"3.2 Practice","text":"Method Endpoint M\u1ee5c \u0111\u00edch GET <code>/api/project</code> L\u1ea5y th\u00f4ng tin project PUT <code>/api/project</code> C\u1eadp nh\u1eadt project info POST <code>/api/project/logo</code> Upload logo"},{"location":"dashboard/settings/#33-services","title":"3.3 Services","text":"Method Endpoint M\u1ee5c \u0111\u00edch GET <code>/api/service-categories</code> L\u1ea5y categories GET <code>/api/procedures</code> L\u1ea5y danh s\u00e1ch services GET <code>/api/procedures/:id</code> Chi ti\u1ebft service POST <code>/api/procedures</code> T\u1ea1o service PUT <code>/api/procedures/:id</code> C\u1eadp nh\u1eadt service DELETE <code>/api/procedures/:id</code> X\u00f3a service"},{"location":"dashboard/settings/#34-channels","title":"3.4 Channels","text":"Method Endpoint M\u1ee5c \u0111\u00edch GET <code>/api/channels</code> L\u1ea5y danh s\u00e1ch channels GET <code>/api/channels/:id</code> Chi ti\u1ebft channel POST <code>/api/channels</code> T\u1ea1o channel PUT <code>/api/channels/:id</code> C\u1eadp nh\u1eadt channel DELETE <code>/api/channels/:id</code> X\u00f3a channel"},{"location":"dashboard/settings/#35-manage-users-staffs","title":"3.5 Manage Users (Staffs)","text":"Method Endpoint M\u1ee5c \u0111\u00edch GET <code>/api/staffs</code> L\u1ea5y danh s\u00e1ch staffs GET <code>/api/staffs/:id</code> Chi ti\u1ebft staff POST <code>/api/staffs</code> T\u1ea1o staff (invite) PUT <code>/api/staffs/:id</code> C\u1eadp nh\u1eadt staff DELETE <code>/api/staffs/:id</code> X\u00f3a staff"},{"location":"dashboard/settings/#36-subscription","title":"3.6 Subscription","text":"Method Endpoint M\u1ee5c \u0111\u00edch GET <code>/api/subscriptions</code> L\u1ea5y subscription info POST <code>/api/subscriptions/upgrade</code> Upgrade plan POST <code>/api/subscriptions/downgrade</code> Downgrade plan POST <code>/api/subscriptions/cancel</code> Cancel subscription"},{"location":"dashboard/settings/#37-billing","title":"3.7 Billing","text":"Method Endpoint M\u1ee5c \u0111\u00edch GET <code>/api/payment-methods</code> L\u1ea5y payment methods POST <code>/api/payment-methods</code> Th\u00eam payment method DELETE <code>/api/payment-methods/:id</code> X\u00f3a payment method GET <code>/api/invoices</code> L\u1ea5y billing history"},{"location":"dashboard/settings/#4-luu-y-ky-thuat","title":"4. L\u01b0u \u00fd k\u1ef9 thu\u1eadt","text":""},{"location":"dashboard/settings/#41-permissions","title":"4.1 Permissions","text":"<ul> <li>Staff role: Kh\u00f4ng th\u1ec3 access <code>/settings/manage-users</code>, <code>/settings/billing</code>, <code>/settings/subscription</code></li> <li>Admin/Owner: Full access t\u1ea5t c\u1ea3 settings</li> <li>Check <code>staffRole !== \"staff\"</code> tr\u01b0\u1edbc khi render manage-users routes</li> </ul>"},{"location":"dashboard/settings/#42-service-categories","title":"4.2 Service Categories","text":"<ul> <li>Fetch service categories khi mount Settings Main</li> <li>Store trong Redux: <code>setting.services.procedure.pageCategory</code></li> <li>Pagination: <code>pageCategory</code> state</li> <li>Use cho c\u1ea3 Services settings v\u00e0 Widget service selection</li> </ul>"},{"location":"dashboard/settings/#43-channel-apps","title":"4.3 Channel Apps","text":"<ul> <li>Channel Apps: Jira, Slack, Zapier, Webhook, Google Calendar, Outlook...</li> <li>Route pattern: <code>/settings/channels/:channelApp/:name</code></li> <li><code>:channelApp</code> - App type (jira, slack, zapier...)</li> <li><code>:name</code> - Channel name/ID</li> <li>Webhook URL: Special route <code>/settings/channels/webhook-url/</code></li> </ul>"},{"location":"dashboard/settings/#44-nested-routing","title":"4.4 Nested Routing","text":"<ul> <li>Settings s\u1eed d\u1ee5ng nested <code>&lt;Switch&gt;</code> trong Main component</li> <li>M\u1ed7i sub-route render component ri\u00eang</li> <li>Shared Sidebar component cho navigation</li> <li>ScrollBar component wrap content</li> </ul>"},{"location":"dashboard/settings/#45-redux-state","title":"4.5 Redux State","text":"<ul> <li><code>setting.services.procedure.serviceCategories</code> - Service categories</li> <li><code>setting.services.procedure.pageCategory</code> - Current page</li> <li><code>setting.services.procedure.totalPageCategory</code> - Total pages</li> <li><code>setting.channels.widgetServiceCategories</code> - Widget service categories</li> <li><code>authentication.user.staff.type</code> - Staff role (staff/admin/owner)</li> </ul>"},{"location":"dashboard/settings/#5-component-structure","title":"5. Component Structure","text":"<pre><code>pages/apps/settings.tsx\n\u2514\u2500\u2500 containers/apps/settings/\n    \u251c\u2500\u2500 sidebar/              # Settings navigation menu\n    \u2514\u2500\u2500 main/\n        \u2514\u2500\u2500 &lt;Switch&gt;          # Nested routes\n            \u251c\u2500\u2500 Account\n            \u251c\u2500\u2500 Practice\n            \u251c\u2500\u2500 Services\n            \u251c\u2500\u2500 ServiceDetails\n            \u251c\u2500\u2500 Blogs\n            \u251c\u2500\u2500 BlogDetails\n            \u251c\u2500\u2500 Channels\n            \u251c\u2500\u2500 ChannelDetail\n            \u251c\u2500\u2500 ChannelAppDetail\n            \u251c\u2500\u2500 ChannelAppWebhookUrlDetail\n            \u251c\u2500\u2500 NotificationSetting\n            \u251c\u2500\u2500 ManageUsers\n            \u251c\u2500\u2500 StaffDetails\n            \u251c\u2500\u2500 Admin\n            \u251c\u2500\u2500 Subscription\n            \u2514\u2500\u2500 Billing\n</code></pre>"},{"location":"dashboard/settings/#6-settings-sidebar-menu","title":"6. Settings Sidebar Menu","text":""},{"location":"dashboard/settings/#61-menu-structure","title":"6.1 Menu Structure","text":"<pre><code>Settings\n\u251c\u2500\u2500 Account\n\u251c\u2500\u2500 Practice Info\n\u251c\u2500\u2500 Services\n\u251c\u2500\u2500 Blogs\n\u251c\u2500\u2500 Channels\n\u251c\u2500\u2500 Notifications\n\u251c\u2500\u2500 Manage Users (Admin/Owner only)\n\u251c\u2500\u2500 Admin (Admin/Owner only)\n\u251c\u2500\u2500 Subscription\n\u2514\u2500\u2500 Billing (Admin/Owner only)\n</code></pre>"},{"location":"dashboard/settings/#62-conditional-menu-items","title":"6.2 Conditional Menu Items","text":"<ul> <li>Manage Users: Ch\u1ec9 show n\u1ebfu <code>staffRole !== \"staff\"</code></li> <li>Billing: Ch\u1ec9 show n\u1ebfu <code>staffRole !== \"staff\"</code></li> <li>Admin: Ch\u1ec9 show n\u1ebfu <code>staffRole !== \"staff\"</code></li> </ul>"},{"location":"dashboard/settings/#7-key-features","title":"7. Key Features","text":""},{"location":"dashboard/settings/#71-account-settings","title":"7.1 Account Settings","text":"<ul> <li>Update profile (name, email, phone, avatar)</li> <li>Change password</li> <li>Enable/Disable 2FA</li> <li>Notification preferences</li> </ul>"},{"location":"dashboard/settings/#72-practice-settings","title":"7.2 Practice Settings","text":"<ul> <li>Practice name, address, phone</li> <li>Logo upload</li> <li>Timezone selection</li> <li>Business hours</li> <li>Multi-location setup (n\u1ebfu c\u00f3)</li> </ul>"},{"location":"dashboard/settings/#73-services-management","title":"7.3 Services Management","text":"<ul> <li>CRUD services/procedures</li> <li>Categorize services</li> <li>Set price, duration</li> <li>Attach to booking widget</li> <li>Service addons</li> </ul>"},{"location":"dashboard/settings/#74-channels-management","title":"7.4 Channels Management","text":"<ul> <li>Configure communication channels:</li> <li>SMS (Twilio)</li> <li>Email (SMTP, Gmail, Outlook)</li> <li>Voice (Twilio)</li> <li>Fax (Twilio)</li> <li>Facebook Messenger</li> <li>Instagram DM</li> <li>Chat Widget</li> <li>Integration apps:</li> <li>Jira</li> <li>Slack</li> <li>Zapier</li> <li>Google Calendar</li> <li>Outlook Calendar</li> <li>Webhook</li> </ul>"},{"location":"dashboard/settings/#75-manage-users","title":"7.5 Manage Users","text":"<ul> <li>Invite staffs</li> <li>Set permissions</li> <li>Assign locations</li> <li>Set schedule/availability</li> <li>Deactivate/Delete users</li> </ul>"},{"location":"dashboard/tickets/","title":"Tickets Screen - Qu\u1ea3n l\u00fd y\u00eau c\u1ea7u h\u1ed7 tr\u1ee3","text":""},{"location":"dashboard/tickets/#1-gioi-thieu","title":"1. Gi\u1edbi thi\u1ec7u","text":"<p>M\u00e0n h\u00ecnh Tickets l\u00e0 trung t\u00e2m qu\u1ea3n l\u00fd t\u1ea5t c\u1ea3 c\u00e1c y\u00eau c\u1ea7u h\u1ed7 tr\u1ee3/conversation t\u1eeb kh\u00e1ch h\u00e0ng qua nhi\u1ec1u k\u00eanh (SMS, Email, Voice, Fax, Chat Widget...).</p> <p>Routes: - <code>/tickets</code> - Danh s\u00e1ch t\u1ea5t c\u1ea3 tickets - <code>/tickets/:id</code> - Chi ti\u1ebft ticket c\u1ee5 th\u1ec3</p> <p>Scope: Xem, ph\u00e2n c\u00f4ng, c\u1eadp nh\u1eadt tr\u1ea1ng th\u00e1i, tr\u1ea3 l\u1eddi tin nh\u1eafn, t\u1ea1o meeting room, qu\u1ea3n l\u00fd files.</p>"},{"location":"dashboard/tickets/#2-yeu-cau-chuc-nang","title":"2. Y\u00eau c\u1ea7u ch\u1ee9c n\u0103ng","text":""},{"location":"dashboard/tickets/#21-hien-thi-tickets","title":"2.1 Hi\u1ec3n th\u1ecb Tickets","text":"<ul> <li>Danh s\u00e1ch tickets theo filter:</li> <li>Status: <code>open</code>, <code>assigned</code>, <code>closed</code>, <code>mentioned</code></li> <li>Type: <code>sms</code>, <code>email</code>, <code>voice</code>, <code>fax</code>, <code>chat</code>, <code>form</code></li> <li>Staff: Filter theo staff \u0111\u01b0\u1ee3c assign</li> <li>Channel: Filter theo k\u00eanh giao ti\u1ebfp</li> <li>Keyword: T\u00ecm ki\u1ebfm theo subject, description, lead name</li> <li>Pagination: 25 tickets/page (default)</li> <li>Sort theo: <code>created_at</code>, <code>updated_at</code>, <code>priority</code></li> <li>Location filter (n\u1ebfu project b\u1eadt multi-location)</li> </ul>"},{"location":"dashboard/tickets/#22-chi-tiet-ticket","title":"2.2 Chi ti\u1ebft Ticket","text":"<ul> <li>Hi\u1ec3n th\u1ecb th\u00f4ng tin ticket:</li> <li>Subject, description, status, type</li> <li>Lead information (name, phone, email, address)</li> <li>Assigned staff</li> <li>Messages/conversation history</li> <li>Attached files</li> <li>Related events/appointments</li> <li>Real-time updates qua WebSocket</li> </ul>"},{"location":"dashboard/tickets/#23-quan-ly-ticket","title":"2.3 Qu\u1ea3n l\u00fd Ticket","text":"<ul> <li>Assign staff: Ph\u00e2n c\u00f4ng ticket cho staff</li> <li>Update status: Chuy\u1ec3n tr\u1ea1ng th\u00e1i <code>open</code> \u2194 <code>assigned</code> \u2194 <code>closed</code></li> <li>Mark as read/unread: \u0110\u00e1nh d\u1ea5u \u0111\u00e3 \u0111\u1ecdc</li> <li>Bulk actions:</li> <li>Bulk update status</li> <li>Bulk assign staff</li> <li>Bulk delete</li> </ul>"},{"location":"dashboard/tickets/#24-tra-loi-ticket","title":"2.4 Tr\u1ea3 l\u1eddi Ticket","text":"<ul> <li>G\u1eedi tin nh\u1eafn qua c\u00e1c k\u00eanh:</li> <li>SMS</li> <li>Email</li> <li>Voice call</li> <li>Fax</li> <li>Attach files (images, documents, videos)</li> <li>Mention staff (@mention)</li> <li>Create tasks t\u1eeb ticket</li> </ul>"},{"location":"dashboard/tickets/#25-meeting-room","title":"2.5 Meeting Room","text":"<ul> <li>T\u1ea1o video meeting room cho ticket</li> <li>Join meeting t\u1eeb ticket detail</li> <li>End meeting v\u00e0 l\u01b0u l\u1ea1i history</li> </ul>"},{"location":"dashboard/tickets/#26-statistics","title":"2.6 Statistics","text":"<ul> <li>T\u1ed5ng s\u1ed1 tickets theo status</li> <li>Tickets theo type (SMS, Email, Voice...)</li> <li>Tickets theo staff</li> <li>Tickets theo location</li> </ul>"},{"location":"dashboard/tickets/#3-api-endpoints","title":"3. API Endpoints","text":"Method Endpoint M\u1ee5c \u0111\u00edch Params Response GET <code>/api/tickets</code> L\u1ea5y danh s\u00e1ch tickets <code>page</code>, <code>limit</code>, <code>status?</code>, <code>type?</code>, <code>staff_id?</code>, <code>staff_ids?</code>, <code>keyword?</code>, <code>channel_id?</code>, <code>sortBy?</code>, <code>sortOrder?</code> <code>CommonPagination&lt;Ticket&gt;</code> GET <code>/api/tickets/:id</code> L\u1ea5y chi ti\u1ebft ticket <code>id</code> <code>Ticket</code> PUT <code>/api/tickets/:id</code> C\u1eadp nh\u1eadt ticket <code>id</code>, <code>staff_id?</code>, <code>status?</code>, <code>read?</code> <code>Ticket</code> PUT <code>/api/tickets/bulk</code> C\u1eadp nh\u1eadt nhi\u1ec1u tickets <code>ids[]</code>, <code>status</code>, <code>staff_id?</code> <code>unknown</code> DELETE <code>/api/tickets/bulk</code> X\u00f3a nhi\u1ec1u tickets <code>ids[]</code> <code>unknown</code> GET <code>/api/tickets/statistics</code> L\u1ea5y th\u1ed1ng k\u00ea tickets <code>location_id?</code> <code>TicketStatisticResponse</code> GET <code>/api/tickets/type/count</code> \u0110\u1ebfm tickets theo type <code>staff_ids[]</code>, <code>status</code>, <code>location_id?</code> <code>CountOfTicket</code> POST <code>/api/videos/room</code> T\u1ea1o meeting room cho ticket <code>phone?</code>, <code>lead_id</code> <code>DailyRoomResponse</code> POST <code>/api/videos/meeting</code> T\u1ea1o meeting room m\u1edbi - <code>MeetingRoomResponse</code> POST <code>/api/leads/:id</code> C\u1eadp nh\u1eadt lead info <code>id</code>, <code>phone</code> <code>Lead</code> GET <code>/api/files/:id/download</code> Download file attachment <code>id</code> <code>Blob</code>"},{"location":"dashboard/tickets/#31-getticketsapi-params","title":"3.1 GetTicketsApi Params","text":"<pre><code>{\n  page: number;               // Page number (default: 1)\n  limit?: number;             // Items per page (default: 25)\n  status?: TicketStatus;      // 'open' | 'closed' | 'pending' | 'resolved'\n  staff_id?: number;          // Filter by single staff\n  staff_ids?: number[];       // Filter by multiple staffs\n  keyword?: string;           // Search keyword\n  type?: string;              // 'sms' | 'email' | 'voice' | 'fax' | 'chat' | 'form'\n  channel_id?: number;        // Filter by channel\n  sortBy?: string;            // 'created_at' | 'updated_at' | 'priority'\n  sortOrder?: string;         // 'asc' | 'desc'\n}\n</code></pre>"},{"location":"dashboard/tickets/#32-updateticketapi-body","title":"3.2 UpdateTicketApi Body","text":"<pre><code>{\n  staff_id?: number | null;   // Assign to staff (null to unassign)\n  status?: string;            // Update status\n  read?: boolean;             // Mark as read/unread\n}\n</code></pre>"},{"location":"dashboard/tickets/#4-websocket-events","title":"4. WebSocket Events","text":"Event Type Trigger Action <code>NEW_TICKET</code> Ticket m\u1edbi \u0111\u01b0\u1ee3c t\u1ea1o Invalidate <code>['fetchTickets']</code>, show notification, update statistics <code>TICKET_UPDATED</code> Ticket \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt Invalidate <code>['fetchTickets']</code>, <code>['tickets', 'ticket-details']</code>, refresh UI <code>NEW_MESSAGE</code> Tin nh\u1eafn m\u1edbi trong ticket Invalidate <code>['messages']</code>, update conversation <code>MESSAGE_UPDATED</code> Tin nh\u1eafn \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt Invalidate <code>['messages']</code>, refresh conversation"},{"location":"dashboard/tickets/#5-redux-state","title":"5. Redux State","text":""},{"location":"dashboard/tickets/#51-ticket-state","title":"5.1 Ticket State","text":"<ul> <li><code>ticket.list.getTicketsParams</code> - Params hi\u1ec7n t\u1ea1i cho fetch tickets</li> <li><code>ticket.statistic</code> - Th\u1ed1ng k\u00ea tickets</li> <li><code>ticket.daily.room</code> - Meeting room hi\u1ec7n t\u1ea1i</li> <li><code>ticket.newMeeting.room</code> - New meeting room</li> <li><code>ticket.channel.data</code> - Danh s\u00e1ch channels</li> </ul>"},{"location":"dashboard/tickets/#52-actions","title":"5.2 Actions","text":"<ul> <li><code>start()</code> - B\u1eaft \u0111\u1ea7u fetch statistics</li> <li><code>getCountOfTicket()</code> - L\u1ea5y count tickets</li> <li><code>clearRoom()</code> - Clear meeting room</li> <li><code>clearMeetingRoom()</code> - Clear new meeting room</li> <li><code>doCheckMeetingRoom()</code> - Check meeting room status</li> </ul>"},{"location":"dashboard/tickets/#6-luu-y-ky-thuat","title":"6. L\u01b0u \u00fd k\u1ef9 thu\u1eadt","text":""},{"location":"dashboard/tickets/#61-real-time-updates","title":"6.1 Real-time Updates","text":"<ul> <li>WebSocket connection cho real-time ticket updates</li> <li>Auto refresh khi c\u00f3 ticket m\u1edbi (n\u1ebfu kh\u00f4ng \u1edf trang tickets)</li> <li>Browser notification cho ticket m\u1edbi (n\u1ebfu user cho ph\u00e9p)</li> <li>Title blinking khi c\u00f3 ticket m\u1edbi (tab kh\u00f4ng active)</li> </ul>"},{"location":"dashboard/tickets/#62-location-filter","title":"6.2 Location Filter","text":"<ul> <li>Ch\u1ec9 hi\u1ec7n tickets thu\u1ed9c location \u0111ang ch\u1ecdn</li> <li>Logic filter:   <pre><code>const isLocationFilterEnabled = user?.project.dashboard_location_filter;\nconst isMatchingLocation = \n  ticket.location_id === Number(localStorage.getItem('location_id')) ||\n  Number(localStorage.getItem('location_id')) === -1;\n</code></pre></li> </ul>"},{"location":"dashboard/tickets/#63-notification-logic","title":"6.3 Notification Logic","text":"<pre><code>// Ch\u1ec9 show notification n\u1ebfu:\n// 1. Kh\u00f4ng \u1edf trang tickets\n// 2. Location filter disabled HO\u1eb6C ticket thu\u1ed9c location \u0111ang ch\u1ecdn\nif (!isOnTicketsPage &amp;&amp; (!isLocationFilterEnabled || isMatchingLocation)) {\n  handleNotification(ticket);\n}\n</code></pre>"},{"location":"dashboard/tickets/#64-pagination-sorting","title":"6.4 Pagination &amp; Sorting","text":"<ul> <li>Default: 25 items/page</li> <li>Sort params format: <code>sort[by]=created_at&amp;sort[order]=desc</code></li> <li>Filter params format: <code>in[status]=open,pending</code></li> </ul>"},{"location":"dashboard/tickets/#65-bulk-operations","title":"6.5 Bulk Operations","text":"<ul> <li>Select multiple tickets</li> <li>Bulk update status: <code>PUT /api/tickets/bulk</code></li> <li>Bulk delete: <code>DELETE /api/tickets/bulk</code></li> <li>Confirm dialog tr\u01b0\u1edbc khi bulk delete</li> </ul>"},{"location":"dashboard/tickets/#7-component-structure","title":"7. Component Structure","text":"<pre><code>pages/apps/tickets.tsx\n\u2514\u2500\u2500 containers/apps/ticket/\n    \u251c\u2500\u2500 wrapper/\n    \u251c\u2500\u2500 sidebar/          # Ticket list v\u1edbi filters\n    \u251c\u2500\u2500 group/            # Ticket groups/categories\n    \u2514\u2500\u2500 main/             # Ticket detail &amp; conversation\n        \u251c\u2500\u2500 ticket-header/\n        \u251c\u2500\u2500 ticket-body/\n        \u2502   \u251c\u2500\u2500 chat-group/      # Messages\n        \u2502   \u251c\u2500\u2500 lead-info/       # Lead details\n        \u2502   \u2514\u2500\u2500 files/           # Attachments\n        \u2514\u2500\u2500 chat-form/           # Reply form\n</code></pre>"},{"location":"dashboard/tickets/#8-dependencies","title":"8. Dependencies","text":"<ul> <li><code>react-query</code> / <code>@tanstack/react-query</code> - Data fetching</li> <li><code>react-toastify</code> - Toast notifications</li> <li>WebSocket - Real-time updates</li> <li><code>@twilio/voice-sdk</code> - Voice calls (n\u1ebfu c\u00f3)</li> </ul>"},{"location":"dashboard/tickets/#9-permissions","title":"9. Permissions","text":"<ul> <li>Staff role:</li> <li>Xem tickets \u0111\u01b0\u1ee3c assign</li> <li>Reply tickets</li> <li>Kh\u00f4ng th\u1ec3 delete tickets</li> <li>Admin/Owner role:</li> <li>Xem t\u1ea5t c\u1ea3 tickets</li> <li>Assign/reassign tickets</li> <li>Bulk operations</li> <li>Delete tickets</li> </ul>"},{"location":"dashboard/voicemails/","title":"Voicemails Screen - Qu\u1ea3n l\u00fd th\u01b0 tho\u1ea1i","text":""},{"location":"dashboard/voicemails/#1-gioi-thieu","title":"1. Gi\u1edbi thi\u1ec7u","text":"<p>M\u00e0n h\u00ecnh Voicemails hi\u1ec3n th\u1ecb t\u1ea5t c\u1ea3 c\u00e1c cu\u1ed9c g\u1ecdi c\u00f3 status <code>voicemail</code> - khi caller \u0111\u1ec3 l\u1ea1i tin nh\u1eafn tho\u1ea1i.</p> <p>Routes: - <code>/voicemails</code> - Danh s\u00e1ch t\u1ea5t c\u1ea3 voicemails - <code>/voicemails/:id</code> - Chi ti\u1ebft voicemail c\u1ee5 th\u1ec3</p> <p>Scope: Xem, nghe, \u0111\u00e1nh d\u1ea5u \u0111\u00e3 nghe, x\u00f3a voicemails.</p>"},{"location":"dashboard/voicemails/#2-yeu-cau-chuc-nang","title":"2. Y\u00eau c\u1ea7u ch\u1ee9c n\u0103ng","text":""},{"location":"dashboard/voicemails/#21-hien-thi-voicemails","title":"2.1 Hi\u1ec3n th\u1ecb Voicemails","text":"<ul> <li>Danh s\u00e1ch voicemails (calls v\u1edbi <code>status === 'voicemail'</code>)</li> <li>Th\u00f4ng tin hi\u1ec3n th\u1ecb:</li> <li>From phone number</li> <li>Lead information</li> <li>Duration</li> <li>Recording URL</li> <li>Timestamp</li> <li>Listened status</li> <li>Pagination</li> <li>Search theo keyword (phone number, lead name)</li> </ul>"},{"location":"dashboard/voicemails/#22-chi-tiet-voicemail","title":"2.2 Chi ti\u1ebft Voicemail","text":"<ul> <li>Play voicemail recording</li> <li>Lead details sidebar</li> <li>Messages history v\u1edbi lead</li> <li>Transcription (n\u1ebfu c\u00f3)</li> <li>Mark as listened/unlistened</li> <li>Delete voicemail</li> </ul>"},{"location":"dashboard/voicemails/#23-actions","title":"2.3 Actions","text":"<ul> <li>Play/Pause recording</li> <li>Download recording</li> <li>Mark as listened</li> <li>Delete voicemail</li> <li>Call back lead</li> <li>Create ticket from voicemail</li> </ul>"},{"location":"dashboard/voicemails/#3-api-endpoints","title":"3. API Endpoints","text":"Method Endpoint M\u1ee5c \u0111\u00edch Params Response GET <code>/api/calls</code> L\u1ea5y danh s\u00e1ch voicemails <code>page</code>, <code>keyword?</code>, <code>get_voicemail=true</code> <code>CommonPagination&lt;Call&gt;</code> GET <code>/api/calls/:id</code> L\u1ea5y chi ti\u1ebft voicemail <code>id</code> <code>Call</code> PUT <code>/api/calls/:id</code> Mark as listened <code>id</code>, <code>listened: true</code> <code>Call</code> DELETE <code>/api/calls/:id</code> X\u00f3a voicemail <code>id</code> <code>Call</code>"},{"location":"dashboard/voicemails/#31-get-voicemails-params","title":"3.1 Get Voicemails Params","text":"<pre><code>{\n  page: number;\n  keyword?: string;\n  get_voicemail: true;    // Required \u0111\u1ec3 filter voicemails\n}\n</code></pre>"},{"location":"dashboard/voicemails/#32-mark-as-listened","title":"3.2 Mark as Listened","text":"<pre><code>PUT /api/calls/:id\n{\n  listened: true\n}\n</code></pre>"},{"location":"dashboard/voicemails/#4-websocket-events","title":"4. WebSocket Events","text":"Event Type Trigger Action <code>NEW_VOICEMAIL</code> Voicemail m\u1edbi Invalidate <code>['getDataVoicemail']</code>, show notification <code>VOICEMAIL_UPDATED</code> Voicemail \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt Invalidate <code>['getDataVoicemail']</code>, refresh UI"},{"location":"dashboard/voicemails/#5-redux-state","title":"5. Redux State","text":""},{"location":"dashboard/voicemails/#51-call-state-shared-voi-calls","title":"5.1 Call State (Shared v\u1edbi Calls)","text":"<ul> <li><code>call.callPage</code> - Current page number</li> </ul>"},{"location":"dashboard/voicemails/#6-luu-y-ky-thuat","title":"6. L\u01b0u \u00fd k\u1ef9 thu\u1eadt","text":""},{"location":"dashboard/voicemails/#61-filter-logic","title":"6.1 Filter Logic","text":"<ul> <li>Voicemail filter: <code>get_voicemail=true</code> trong API params</li> <li>Backend filter calls c\u00f3 <code>status === 'voicemail'</code></li> </ul>"},{"location":"dashboard/voicemails/#62-recording-playback","title":"6.2 Recording Playback","text":"<ul> <li>Use HTML5 <code>&lt;audio&gt;</code> element</li> <li>Support play/pause/seek</li> <li>Display duration v\u00e0 current time</li> <li>Auto-mark as listened khi play recording</li> </ul>"},{"location":"dashboard/voicemails/#63-notification","title":"6.3 Notification","text":"<ul> <li>Browser notification khi c\u00f3 voicemail m\u1edbi</li> <li>Badge count tr\u00ean sidebar menu</li> <li>Sound alert (optional)</li> </ul>"},{"location":"dashboard/voicemails/#7-component-structure","title":"7. Component Structure","text":"<pre><code>pages/apps/voicemails.tsx\n\u2514\u2500\u2500 containers/apps/\n    \u251c\u2500\u2500 ticket/sidebar/       # Sidebar v\u1edbi isVoicemail flag\n    \u251c\u2500\u2500 calls/group/          # Voicemail list (reuse t\u1eeb calls)\n    \u2514\u2500\u2500 voicemails/main/      # Voicemail detail\n</code></pre>"},{"location":"dashboard/voicemails/#8-permissions","title":"8. Permissions","text":"<ul> <li>All roles: C\u00f3 th\u1ec3 xem v\u00e0 nghe voicemails</li> <li>Staff: Ch\u1ec9 xem voicemails c\u1ee7a leads \u0111\u01b0\u1ee3c assign</li> <li>Admin/Owner: Xem t\u1ea5t c\u1ea3 voicemails</li> </ul>"},{"location":"dashboard/workflows/","title":"Workflows Module - Automation Rules","text":""},{"location":"dashboard/workflows/#1-gioi-thieu","title":"1. Gi\u1edbi thi\u1ec7u","text":"<p>Module Workflows cho ph\u00e9p t\u1ea1o automation rules \u0111\u1ec3 t\u1ef1 \u0111\u1ed9ng h\u00f3a c\u00e1c t\u00e1c v\u1ee5 marketing v\u00e0 communication (send SMS/Email, track engagement).</p> <p>Route: <code>/workflows</code></p> <p>Scope: T\u1ea1o, s\u1eeda, x\u00f3a workflows, view execution metrics, enable/disable workflows.</p> <p>L\u01b0u \u00fd: Workflows trong h\u1ec7 th\u1ed1ng n\u00e0y l\u00e0 simple automation rules, KH\u00d4NG ph\u1ea3i visual workflow builder ph\u1ee9c t\u1ea1p.</p>"},{"location":"dashboard/workflows/#2-yeu-cau-chuc-nang","title":"2. Y\u00eau c\u1ea7u ch\u1ee9c n\u0103ng","text":""},{"location":"dashboard/workflows/#21-workflow-management","title":"2.1 Workflow Management","text":"<ul> <li>CRUD Workflows:</li> <li>Create workflow</li> <li>Edit workflow</li> <li>Delete workflow</li> <li>Enable/Disable workflow (<code>active: true/false</code>)</li> <li>Workflow Configuration:</li> <li>Set workflow name</li> <li>Select trigger</li> <li>Configure actions (payload)</li> <li>Set active status</li> </ul>"},{"location":"dashboard/workflows/#22-workflow-metrics","title":"2.2 Workflow Metrics","text":"<ul> <li>Execution Tracking:</li> <li>Email sent count</li> <li>SMS sent count</li> <li>Email opened count</li> <li>Performance Monitoring:</li> <li>Track workflow effectiveness</li> <li>View engagement metrics</li> </ul>"},{"location":"dashboard/workflows/#3-api-endpoints","title":"3. API Endpoints","text":"<p>L\u01b0u \u00fd: API endpoints c\u1ea7n verify th\u00eam t\u1eeb actual API files. D\u01b0\u1edbi \u0111\u00e2y l\u00e0 endpoints d\u1ef1 ki\u1ebfn d\u1ef1a tr\u00ean pattern chung:</p> Method Endpoint M\u1ee5c \u0111\u00edch Params Response GET <code>/api/workflows</code> L\u1ea5y danh s\u00e1ch workflows <code>page?</code>, <code>limit?</code>, <code>active?</code> <code>CommonPagination&lt;WorkflowResponse&gt;</code> GET <code>/api/workflows/:id</code> Chi ti\u1ebft workflow <code>id</code> <code>WorkflowResponse</code> POST <code>/api/workflows</code> T\u1ea1o workflow <code>WorkflowData</code> <code>WorkflowResponse</code> PUT <code>/api/workflows/:id</code> C\u1eadp nh\u1eadt workflow <code>id</code>, <code>WorkflowData</code> <code>WorkflowResponse</code> DELETE <code>/api/workflows/:id</code> X\u00f3a workflow <code>id</code> <code>void</code> PUT <code>/api/workflows/:id/toggle</code> Enable/Disable <code>id</code>, <code>active: boolean</code> <code>WorkflowResponse</code>"},{"location":"dashboard/workflows/#31-workflowresponse-tu-source","title":"3.1 WorkflowResponse (t\u1eeb source)","text":"<pre><code>{\n  id: number;\n  name: string;\n  project_id: number;\n  workflow_trigger_id: number;\n  active: boolean;\n  payload?: any;                // Workflow configuration (structure not defined)\n  uuid?: any;\n  created_at: Date;\n  updated_at: Date;\n\n  // Metrics\n  email_sent_count?: number;\n  sms_sent_count?: number;\n  email_opened_count?: number;\n}\n</code></pre>"},{"location":"dashboard/workflows/#32-workflowdata-du-kien","title":"3.2 WorkflowData (D\u1ef1 ki\u1ebfn)","text":"<pre><code>{\n  name: string;\n  workflow_trigger_id: number;\n  active: boolean;\n  payload?: {\n    // Workflow configuration\n    // Structure depends on trigger type\n    // C\u1ea7n verify t\u1eeb actual workflow builder component\n  };\n}\n</code></pre>"},{"location":"dashboard/workflows/#4-workflow-structure","title":"4. Workflow Structure","text":""},{"location":"dashboard/workflows/#41-workflow-components","title":"4.1 Workflow Components","text":"<p>D\u1ef1a tr\u00ean type definition, workflow c\u00f3 c\u00e1c th\u00e0nh ph\u1ea7n: - Name: T\u00ean workflow - Trigger: Trigger ID (reference to workflow_trigger table) - Payload: Configuration data (structure kh\u00f4ng r\u00f5 t\u1eeb types) - Active: Enable/disable status</p>"},{"location":"dashboard/workflows/#42-metrics-tracking","title":"4.2 Metrics Tracking","text":"<p>Workflows track 3 metrics ch\u00ednh: - email_sent_count: S\u1ed1 email \u0111\u00e3 g\u1eedi - sms_sent_count: S\u1ed1 SMS \u0111\u00e3 g\u1eedi - email_opened_count: S\u1ed1 email \u0111\u00e3 m\u1edf</p>"},{"location":"dashboard/workflows/#5-luu-y-ky-thuat","title":"5. L\u01b0u \u00fd k\u1ef9 thu\u1eadt","text":""},{"location":"dashboard/workflows/#51-workflow-payload","title":"5.1 Workflow Payload","text":"<ul> <li><code>payload</code> field c\u00f3 type <code>any</code> - structure kh\u00f4ng \u0111\u01b0\u1ee3c define trong types</li> <li>C\u00f3 th\u1ec3 ch\u1ee9a:</li> <li>Trigger conditions</li> <li>Action configurations</li> <li>Timing rules</li> <li>Target audience filters</li> <li>C\u1ea7n verify: Check workflow builder component \u0111\u1ec3 bi\u1ebft ch\u00ednh x\u00e1c structure</li> </ul>"},{"location":"dashboard/workflows/#52-trigger-system","title":"5.2 Trigger System","text":"<ul> <li>Workflows s\u1eed d\u1ee5ng <code>workflow_trigger_id</code></li> <li>Trigger types kh\u00f4ng \u0111\u01b0\u1ee3c define trong types</li> <li>C\u1ea7n verify: Check workflow_trigger table/API \u0111\u1ec3 bi\u1ebft trigger types</li> </ul>"},{"location":"dashboard/workflows/#53-active-status","title":"5.3 Active Status","text":"<ul> <li><code>active: true</code> \u2192 Workflow \u0111ang ch\u1ea1y</li> <li><code>active: false</code> \u2192 Workflow t\u1ea1m d\u1eebng</li> <li>Toggle via API: <code>PUT /api/workflows/:id/toggle</code></li> </ul>"},{"location":"dashboard/workflows/#54-metrics-collection","title":"5.4 Metrics Collection","text":"<ul> <li>Metrics \u0111\u01b0\u1ee3c track t\u1ef1 \u0111\u1ed9ng khi workflow execute</li> <li>Email opened tracking: C\u00f3 th\u1ec3 d\u00f9ng tracking pixel</li> <li>SMS sent tracking: Track qua Twilio webhook</li> </ul>"},{"location":"dashboard/workflows/#6-reputationreview-workflows","title":"6. Reputation/Review Workflows","text":"<p>Bonus: H\u1ec7 th\u1ed1ng c\u00f3 th\u00eam <code>ReputationResponse</code> type cho review workflows:</p> <pre><code>interface ReputationResponse {\n  id: number;\n  link: string;                 // Review link\n  project_id: number;\n  location_id: number;\n  trigger: string;              // Trigger type\n  type: string;                 // Reputation type\n  wait_in_minutes: number;      // Delay before sending\n  stage_id?: number;            // Lead stage trigger\n  created_at: Date;\n  updated_at: Date;\n  procedures: Procedure[];      // Filter by procedures\n  locations: Location[];        // Filter by locations\n  project_review_link: string;\n}\n</code></pre> <p>Use case: T\u1ef1 \u0111\u1ed9ng g\u1eedi review request sau khi: - Event completed - Ticket closed - Specific lead stage reached - Specific procedure completed</p>"},{"location":"dashboard/workflows/#7-component-structure","title":"7. Component Structure","text":"<pre><code>pages/apps/workflows.tsx\n\u2514\u2500\u2500 containers/apps/workflows/\n    \u251c\u2500\u2500 list/                 # Workflows list\n    \u251c\u2500\u2500 create/               # Create workflow\n    \u251c\u2500\u2500 edit/                 # Edit workflow\n    \u2514\u2500\u2500 metrics/              # Workflow metrics dashboard\n</code></pre> <p>L\u01b0u \u00fd: C\u1ea7n check actual component structure \u0111\u1ec3 verify.</p>"},{"location":"dashboard/workflows/#8-permissions","title":"8. Permissions","text":"<ul> <li>All roles: C\u00f3 th\u1ec3 view workflows</li> <li>Admin/Owner: Create/edit/delete workflows</li> </ul>"},{"location":"dashboard/workflows/#9-limitations-unknown","title":"9. Limitations &amp; Unknown","text":""},{"location":"dashboard/workflows/#91-khong-ro-tu-source-code","title":"9.1 Kh\u00f4ng r\u00f5 t\u1eeb source code:","text":"<ul> <li>\u2753 Workflow builder UI (simple form hay visual builder?)</li> <li>\u2753 Trigger types (event-based, time-based, manual?)</li> <li>\u2753 Action types (ch\u1ec9 email/SMS hay c\u00f2n actions kh\u00e1c?)</li> <li>\u2753 Payload structure (conditions, filters, timing...)</li> <li>\u2753 Execution engine (queue-based, cron-based?)</li> </ul>"},{"location":"dashboard/workflows/#92-can-verify-them","title":"9.2 C\u1ea7n verify th\u00eam:","text":"<ul> <li>[ ] Check workflow builder component</li> <li>[ ] Check workflow_trigger table/API</li> <li>[ ] Check workflow execution logs</li> <li>[ ] Check payload examples t\u1eeb database</li> </ul>"},{"location":"dashboard/workflows/#11-goi-y-documentation","title":"11. G\u1ee3i \u00fd Documentation","text":"<p>\u0110\u1ec3 ho\u00e0n thi\u1ec7n t\u00e0i li\u1ec7u n\u00e0y, c\u1ea7n: 1. Check workflow builder component code 2. Check API routes cho workflows 3. Check database schema cho workflow_trigger 4. Check payload examples t\u1eeb existing workflows 5. Check execution engine implementation</p> <p>Files c\u1ea7n check: - <code>containers/apps/workflows/</code> - UI components - <code>api/workflow/</code> - API calls - Database migrations - workflow tables schema</p>"},{"location":"intake-form/IntakeForm/","title":"Intake Form Documentation","text":""},{"location":"intake-form/IntakeForm/#coming-soon","title":"\ud83d\udea7 Coming Soon","text":"<p>T\u00e0i li\u1ec7u Intake Form \u0111ang \u0111\u01b0\u1ee3c x\u00e2y d\u1ef1ng v\u00e0 s\u1ebd s\u1edbm \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt.</p> <p>N\u1ed9i dung d\u1ef1 ki\u1ebfn:</p> <ul> <li>Form Structure</li> <li>Field Types</li> <li>Validation Rules</li> <li>Submission Process</li> <li>Integration with Dashboard</li> </ul>"},{"location":"widget/Widget/","title":"WIDGET","text":"<ul> <li>Link widget v\u00ed d\u1ee5: https://assistant.pilotpractice.com/?form_id=62998b6df1b05  </li> <li>Diagram: https://www.mermaidchart.com/d/074843d2-c0d6-4a7f-bb7c-c539dcdd5ded</li> </ul>"},{"location":"widget/Widget/#widget-tong-quan","title":"WIDGET T\u1ed4NG QUAN","text":"<ul> <li>Ng\u00f4n ng\u1eef: Javascript  </li> <li>Widget \u0111\u01b0\u1ee3c nh\u00fang v\u00e0o website (th\u01b0\u1eddng l\u00e0 trang ch\u1ee7) c\u1ee7a c\u00e1c c\u01a1 s\u1edf th\u1ea9m m\u1ef9/clinic (m\u1ed7i c\u01a1 s\u1edf = 1 project).  </li> <li>T\u00f9y nhu c\u1ea7u, m\u1ed7i project c\u00f3 th\u1ec3 ch\u1ecdn ki\u1ec3u c\u00e0i \u0111\u1eb7t (installation type) kh\u00e1c nhau. </li> </ul>"},{"location":"widget/Widget/#1-embed","title":"1) EMBED","text":"<p>Script Loader \u2192 load theo UUID</p> <p>Website nh\u00fang 1 \u0111o\u1ea1n script loader.</p> <ul> <li>Loader nh\u1eadn <code>uuid</code> c\u1ee7a project  </li> <li>\u2192 g\u1ecdi API \u0111\u1ec3 l\u1ea5y config/data  </li> <li>\u2192 render widget </li> </ul>"},{"location":"widget/Widget/#2-widget-options-custom-options","title":"2) WIDGET OPTIONS &amp; CUSTOM OPTIONS","text":""},{"location":"widget/Widget/#options-chinh-main-menu","title":"Options ch\u00ednh (main menu)","text":"<ul> <li>Instant Quote</li> <li>Book Appointment</li> <li>Ask Question</li> <li>FAQs</li> <li>Call Us</li> <li>...</li> </ul>"},{"location":"widget/Widget/#custom-options","title":"Custom options","text":"<ul> <li>B\u1ea3n ch\u1ea5t: link redirect  </li> <li>Logic: m\u1ed7i custom option c\u00f3 behavior ri\u00eang d\u1ef1a tr\u00ean config </li> </ul>"},{"location":"widget/Widget/#parameters","title":"Parameters","text":"<ul> <li><code>&amp;full_page</code> \u2192 hi\u1ec3n th\u1ecb widget full screen</li> <li><code>&amp;appointment_channel_id</code> \u2192 hi\u1ec3n th\u1ecb widget d\u1ea1ng calendar link v\u00e0 select appointment channel c\u1ee5 th\u1ec3</li> <li><code>&amp;event_id=</code> \u2192 show tr\u1ef1c ti\u1ebfp event detail</li> <li><code>?signature=&lt;signature&gt;&amp;expires=&lt;expires&gt;</code> \u2192 confirm/cancel event</li> <li><code>&amp;staff_id</code> \u2192 auto-select staff, skip m\u00e0n ch\u1ecdn staff</li> <li><code>&amp;procedure_id</code> \u2192 t\u01b0\u01a1ng t\u1ef1 <code>staff_id</code></li> </ul>"},{"location":"widget/Widget/#attributes-script-data-","title":"Attributes (script <code>data-*</code>)","text":"<ul> <li><code>data-click=\"instant-quote-now\"</code></li> <li><code>data-click=\"schedule-consultation\"</code></li> <li><code>data-click=\"faqs\"</code></li> <li><code>data-click=\"text-us\"</code></li> <li><code>data-click=\"call\"</code></li> </ul> <p>Ngo\u00e0i ra c\u00f3 c\u00e1c <code>data-*</code> kh\u00e1c \u0111\u1ec3 t\u1ef1 x\u1eed l\u00fd logic t\u01b0\u01a1ng \u1ee9ng.  </p>"},{"location":"widget/Widget/#3-flows","title":"3) FLOWS","text":""},{"location":"widget/Widget/#31-instant-quote-flow","title":"3.1) Instant Quote Flow","text":"<p>User click \u2192 Gender? (YES ch\u1ecdn | NO skip) \u2192 Body Area? (YES ch\u1ecdn | NO skip) \u2192 Provider? (Use/Select/Skip) \u2192 Services (REQUIRED) \u2192 Interest (REQUIRED) \u2192 Name (REQUIRED) \u2192 Email (REQUIRED) \u2192 Phone (REQUIRED) \u2192 <code>[API: Create Lead]</code> \u2192 Quote Summary \u2192 Thank You</p>"},{"location":"widget/Widget/#32-faqs-flow","title":"3.2) FAQs Flow","text":"<p>FAQs \u2192 <code>TOP_QUESTION</code> \u2192 list \u2192 click question \u2192 expand/collapse (m\u1edf 1 c\u00e1i \u0111\u00f3ng c\u00e1i kh\u00e1c) \u2192 \"I have another question\" \u2192 <code>ASK_QUESTION</code></p>"},{"location":"widget/Widget/#33-call-us-flow","title":"3.3) Call Us Flow","text":"<p>Multiple phone numbers?</p> <ul> <li>YES (<code>main_phone_number=false</code> AND <code>locations &gt; 1</code>) \u2192 <code>LOCATION_CALL</code> \u2192 ch\u1ecdn location \u2192 <code>tel:</code> \u2192 END</li> <li>NO \u2192 \u01b0u ti\u00ean s\u1ed1 g\u1ecdi:</li> <li><code>main_phone_number</code></li> <li>(1 location ? <code>locations[0].phone</code>) \u2192 <code>phoneToCall</code> \u2192 <code>tel:</code> \u2192 END</li> </ul> <p>Code <pre><code>const phoneNumber =\n  form?.main_phone_number ||\n  (form?.locations?.length === 1 ? form?.locations[0]?.phone : null) ||\n  phoneToCall;\n</code></pre></p>"},{"location":"widget/Widget/#34-book-appointment-flow","title":"3.4) Book Appointment Flow","text":""},{"location":"widget/Widget/#a-calendar","title":"A) CALENDAR","text":"<p>Collect info first? (<code>REQUEST_CONSULT</code> \u2192 OTP? \u2192 Login/Create Lead) ho\u1eb7c direct booking</p> <p>Location \u2192 Provider \u2192 Procedure \u2192 <code>SELECT_TIME</code> \u2192 Create Appointment/Register \u2192 Confirmed</p>"},{"location":"widget/Widget/#b-form","title":"B) FORM","text":"<p><code>REQUEST_CONSULT</code> \u2192 OTP? \u2192 Category? \u2192 Create Lead \u2192 Summary \u2192 End</p> <p>Key flags</p> <ul> <li><code>appointment_request_type</code></li> <li><code>enable_category_selection</code></li> <li><code>is_phone_otp_enabled</code></li> <li><code>collect_patient_information_first_before_scheduling</code></li> </ul>"},{"location":"widget/Widget/#35-ask-question-flow","title":"3.5) Ask Question Flow","text":"<p><code>ASK_QUESTION</code> \u2192 nh\u1eadp info \u2192 tick consent \u2192 Submit</p> <p>Flow types:</p> <ul> <li>Normal \u2192 <code>POST /leads</code> \u2192 lead <code>step=\"question\"</code> \u2192 End</li> <li>Book Appointment mode \u2192 <code>CONSULT_SUMMARY</code></li> </ul>"},{"location":"widget/Widget/#4-settings","title":"4) SETTINGS","text":"<p>T\u1ea5t c\u1ea3 settings c\u1ee7a widget \u0111\u01b0\u1ee3c c\u1ea5u h\u00ecnh \u1edf 2 channel: - Web Assistant - Calendar Links  </p>"},{"location":"workflow/Workflow/","title":"Workflow Documentation","text":""},{"location":"workflow/Workflow/#coming-soon","title":"\ud83d\udea7 Coming Soon","text":"<p>T\u00e0i li\u1ec7u Workflow \u0111ang \u0111\u01b0\u1ee3c x\u00e2y d\u1ef1ng v\u00e0 s\u1ebd s\u1edbm \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt.</p> <p>N\u1ed9i dung d\u1ef1 ki\u1ebfn:</p> <ul> <li>Workflow Overview</li> <li>Process Flows</li> <li>State Management</li> <li>Automation Rules</li> <li>Integration Points</li> </ul>"}]}